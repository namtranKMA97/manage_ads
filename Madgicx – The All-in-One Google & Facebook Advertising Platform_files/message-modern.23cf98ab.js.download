(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{581:function(e,t,o){"use strict";o.d(t,"i",(function(){return s})),o.d(t,"c",(function(){return a})),o.d(t,"d",(function(){return c})),o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return p})),o.d(t,"g",(function(){return m})),o.d(t,"h",(function(){return g})),o.d(t,"f",(function(){return b})),o.d(t,"e",(function(){return f}));var i=o(450),r=o(541),n=o(485);const s=5,a=7,c=10,l=300,p=c+120,h="cubic-bezier(0.165, 0.84, 0.44, 1)",d=Object(i.d)("0%{opacity:0;transform:translateY(20px);}30%{opacity:1;}100%{opacity:1;transform:translateY(0);}"),m=Object(i.c)("div",{target:"e1d2cwfh0"})("padding:0 ",s,"px;");var u={name:"1fcc2f6",styles:"box-shadow:0 2px 8px 0 rgba(35,47,53,0.2);"};const g=Object(i.c)("div",{target:"e1d2cwfh1"})("position:relative;height:",Object(i.e)("height"),"px;width:",340,"px;max-width:100%;padding-bottom:",c,"px;",n.b.className,"{height:",120,"px;",({theme:e})=>e.isMobile&&u,";}",r.a.className,"{animation:",d," 0.25s ",h,";}"),b=Object(i.c)("div",{target:"e1d2cwfh2"})("box-sizing:border-box;position:absolute;bottom:",c,"px;width:100%;backface-visibility:hidden;transform-origin:top center;transition:transform ",l,"ms ",h,";",({position:e})=>2===e&&Object(i.b)("transform:translate3d(0,-",a,"px,0) scale(0.95);")," ",({position:e})=>3===e&&Object(i.b)("transform:translate3d(0,-",2*a,"px,0) scale(0.9);")," ",({position:e,expanded:t})=>2===e&&t&&Object(i.b)("transition-delay:150ms;transform:translate3d(0,-",p,"px,0) scale(1);")," ",({position:e,expanded:t})=>3===e&&t&&Object(i.b)("transition-delay:150ms;transform:translate3d(0,-",2*p,"px,0) scale(1);")),f=Object(i.c)("div",{target:"e1d2cwfh3"})("padding-top:",c,"px;:after{content:'';clear:both;display:table;}",r.b.className,"{transition:opacity ",l/1.5,"ms ",h,";",({expandAnimationInProgress:e})=>e&&Object(i.b)("transition-delay:",l,"ms;"),"}")},663:function(e,t,o){"use strict";o.d(t,"b",(function(){return b}));var i=o(451),r=o(671),n=o(9),s=o(2),a=o(8),c=o(65),l=o(10),p=o(5),h=o(63),d=o(6),m=o(160),u=o(153),g=o(525);const b=(e,t,o)=>{const{officeHoursResponse:i}=e;return Object.assign({},e,t,o,{onOpen:()=>{const{conversation:o,part:i}=e;t.onOpen(o.id,i.id)},onConversationRead:()=>{t.onConversationRead(e.conversation.id)},onComposerOrFormInputClick:()=>{t.onComposerOrFormInputClick(e.conversation.id)},onReactionSelect:o=>{t.onReactionSelect(e.conversation.id,o)},onClose:()=>{const{conversation:o}=e;t.onClose(o.id)},onSuggestionClicked:o=>{const{conversation:r}=e,n=Object(g.c)(r);t.onSuggestionClicked(r,o,n,i)},setComposerSuggestionsDismissed:()=>{t.setComposerSuggestionsDismissed(e.conversation.id)}})};t.a=Object(i.connect)(e=>{const{isPresent:t}=e.user,{name:o,userConversationAttachmentsEnabled:i,userConversationGifsEnabled:r}=e.app,{partId:s}=e.message,c=Object(h.a)(e)[0],l=a.a.isMobileBrowser();let p=void 0!==s?c.parts.find(e=>e.id===s):(e=>e.readAt?Object(d.r)(e):Object(d.b)(e))(c),{messageType:m}=p||{};m=m||"adminReply",p=Object.assign({},p,{messageType:m});const u=Object(n.l)(e),{upfrontEmailCollectorShowing:b}=e.app.upfrontEmailCollection;return{appName:o,conversation:c,conversationSuggestions:Object(g.a)(e),part:p,userIsPresent:t,isMobile:l,showUploadButton:i,showGifButton:r,shouldShowUpfrontEmailComposer:u,isUpfrontEmailComposerShowing:b,officeHoursResponse:e.app&&e.app.officeHoursResponse}},e=>({onOpen:(t,o)=>{e(Object(c.b)(t,o)),e(Object(c.c)(t,o))},onClose:()=>{e(Object(c.a)())},onConversationRead:t=>{e(Object(p.m)(s.b,t))},onComposerOrFormInputClick:t=>{e(Object(c.a)()),e(Object(l.f)(t)),e(Object(p.l)(s.b,t))},onReactionSelect:(t,o)=>{e(Object(p.k)(s.b,t,o,!1))},onSuggestionClicked:(t,o,i,r)=>{e(Object(m.a)(s.b,t,o,!1,i,!0,r))},setComposerSuggestionsDismissed:t=>{e(Object(u.b)(t))}}),b)(r.a)},671:function(e,t,o){"use strict";var i=o(453),r=o.n(i),n=o(449),s=o.n(n),a=o(679),c=o(585),l=o(33),p=o(147),h=o(524),d=o(526),m=o(468),u=o(450),g=o(498);const b=Object(u.d)("0%{opacity:0;}70%{opacity:0;transform:translateY(20px);}100%{opacity:1;transform:translateY(0);}"),f=Object(u.c)("div",{target:"enffyqv0"})("position:relative;box-sizing:border-box;padding:17px 20px;margin-top:5px;width:100%;height:",Object(u.f)("chatComposerHeightPx"),"px;background-color:",Object(u.f)("inputBackground"),";border-radius:",Object(u.f)("notificationBorderRadiusPx"),"px;border:none;font-size:14px;cursor:pointer;color:",Object(u.f)("inputPlaceholder"),";box-shadow:0 1px 6px rgba(0,0,0,0.06),0 2px 32px rgba(0,0,0,0.16);animation:",b," 750ms ease;",({theme:e,useBorderlessAvatarOffset:t})=>e.isLeftAlign&&t&&Object(u.b)("margin-left:",-e.borderlessAvatarOffsetWidthPx,"px;width:calc(100% + ",e.borderlessAvatarOffsetWidthPx,"px);")),v=Object(u.c)("span",{target:"enffyqv1"})({name:"1rju6wc",styles:"display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:140px;line-height:18px;"}),y=Object(u.c)("div",{target:"enffyqv2"})({name:"1cp2t9f",styles:"position:absolute;top:0;right:18px;"}),O=Object(u.c)("span",{target:"enffyqv3"})({name:"pctu5d",styles:"position:relative;float:left;display:inline-block;cursor:pointer;opacity:0.8;transition:opacity 200ms ease;height:51px;margin-top:2px;&:hover{opacity:1;}&:before{position:absolute;top:20px;background-position:center;}svg{position:absolute;top:18px;}"},";width:",18,"px;padding-left:",9,"px;padding-right:",9,"px;svg{height:18px;width:18px;}svg path{fill:",Object(u.f)("grey"),";}&:before{top:18px;}"),C=Object(u.c)(g.a,{target:"enffyqv4"})({name:"g6u7x8",styles:"right:18px;"}),x=Object(u.c)(g.c,{target:"enffyqv5"})({name:"1yphczb",styles:"&:before{top:18px;}"}),w=Object(u.c)(g.j,{target:"enffyqv6"})({name:"1yphczb",styles:"&:before{top:18px;}"});class mobile_chat_MobileChat extends n.Component{constructor(...e){var t,o,i;super(...e),i=e=>{e.stopPropagation(),this.props.onClose()},(o="handleDismissClick")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}renderComposer(){const{firstName:e}=this.props.part.author;return s.a.createElement(f,{useBorderlessAvatarOffset:!0},s.a.createElement(v,{className:"chat-composer-placeholder"},Object(l.e)("reply_to_name",{name:e})),s.a.createElement(C,null,s.a.createElement(x,null,s.a.createElement(d.a,null)),s.a.createElement(w,null,s.a.createElement(h.a,null))))}renderAttributeCollectorCard(){const{part:e,frameWindow:t}=this.props;return s.a.createElement(c.a,{part:e,hasAvatar:!1,isBorderless:!0,isReplyType:!0,frameWindow:t,key:Object(p.a)(JSON.stringify(e))})}renderDismissButton(){return s.a.createElement(m.b,{onClick:this.handleDismissClick,"aria-label":Object(l.e)("clear")},s.a.createElement("span",null,Object(l.e)("clear")))}renderReplyType(){const{part:e}=this.props;switch(e.replyType){case"attribute_collector":return this.renderAttributeCollectorCard();default:return this.renderComposer()}}renderChatCardGroup(){const{appName:e,part:t,frameWindow:o}=this.props;return s.a.createElement(a.a,{appName:e,part:t,isBorderless:!0,isMobile:!0,frameWindow:o})}render(){const{composerState:e,onComposerOrFormInputClick:t}=this.props;return s.a.createElement(m.a,{className:"intercom-chat",onClick:t},this.renderChatCardGroup(),this.renderDismissButton(),e.visible&&this.renderReplyType())}}var j=o(456),S=o(459),k=o(452);var E={name:"145vpms",styles:"left:0;right:auto;"};const P=Object(u.c)(S.a,{target:"e1g9h0if0"})("z-index:",Object(k.m)(),";position:fixed;max-width:360px;width:calc(100% - 25px);right:0;",({height:e})=>Object(u.b)("bottom:0;height:",e+20,"px;")," ",({theme:e})=>e.isLeftAlign&&E," ",({theme:e,height:t})=>e.isLauncherEnabled&&Object(u.b)("height:",t+e.launcherOffsetBottomPaddingPx+20,"px;"));var T=o(491);function R(e){const{appName:t,part:o,onClose:i,onComposerOrFormInputClick:r,composerState:a}=e,[c,p]=Object(n.useState)(0),h=({height:e})=>p(e);return s.a.createElement(P,{frameName:"intercom-chat-frame",height:c,title:`Intercom live chat ${Object(l.e)("message")}`},e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(j.b,{onChange:h},s.a.createElement(mobile_chat_MobileChat,{appName:t,part:o,onClose:i,composerState:a,onComposerOrFormInputClick:r,frameWindow:e})),s.a.createElement(T.a,{appWindow:e})))}var _=o(489),I=o(465),N=o(490),B=o(508),M=o(25),D=o(661),F=o(589),H=o(1),A=o(470),V=o(520);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function q(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class note_Note extends n.Component{constructor(...e){super(...e),q(this,"state",{isFooterVisible:!0,isScrolled:!1}),q(this,"handleScroll",e=>{const{isFooterVisible:t}=this.state,o=Object(M.l)(e.target);this.setState({isFooterVisible:t||o<=this.getFooterHeight(),isScrolled:e.target.scrollTop>0}),Object(V.a)(e)}),q(this,"handleScrollable",e=>{const t=e.scrollHeight-e.clientHeight,o=this.state.isFooterVisible||void 0===this.props.reactionsReply||t<=this.getReactionsVisibilityThreshold();this.setState({isFooterVisible:o})}),q(this,"addClickedComposerMetric",()=>{const{message:{id:e},conversationId:t}=this.props;Object(H.e)("clicked","composer","in_app","from_full",{message_type:"note",message_id:e,conversation_id:t})}),q(this,"handleComposerClick",()=>{this.addClickedComposerMetric(),this.props.onComposerClick()})}getReactionsVisibilityThreshold(){return this.getFooterHeight()+20}getFooterHeight(){return this.footer?this.footer.clientHeight:0}renderFooter(){const{composerVisible:e,showUploadButton:t,showGifButton:o,showReplyToButton:i}=this.props;return e?i?s.a.createElement(F.a,{onClick:this.handleComposerClick}):s.a.createElement(A.c,{className:"intercom-note-composer",onClick:this.handleComposerClick,"aria-label":Object(l.e)("open_conversation_and_reply")},s.a.createElement(g.f,null,Object(l.e)("reply_to_conversation")),s.a.createElement(g.a,null,o?s.a.createElement(g.e,null,s.a.createElement(D.a,null)):null,s.a.createElement(g.c,null,s.a.createElement(d.a,null)),t?s.a.createElement(g.j,null,s.a.createElement(h.a,null)):null)):null}renderReactionPicker(){const{reactionsReply:e,onReactionSelect:t}=this.props;return s.a.createElement(B.a,W({},e,{onReactionSelect:t}))}render(){const{appName:e,message:t,reactionsReply:o,onClose:i,frameWindow:r,showReplyToButton:n}=this.props,{isScrolled:a,isFooterVisible:c}=this.state,{author:p,lastActiveAt:h,body:d}=t;return s.a.createElement(A.e,{className:"intercom-note",isScrolled:a},s.a.createElement(N.a,{appName:e,isReplyStyle:!1,author:p,lastActiveAt:h},s.a.createElement(A.b,{className:"intercom-anchor",onClick:i,"aria-label":Object(l.e)("close")}," "),s.a.createElement(A.a,{showReplyToButton:n},s.a.createElement(_.a,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},s.a.createElement(I.a,{blocks:d,zoomable:!0,frameWindow:r}))),s.a.createElement(A.d,{ref:e=>this.footer=e,isFooterVisible:c,showReplyToButton:n},o?this.renderReactionPicker():this.renderFooter())))}}note_Note.propTypes={appName:r.a.string.isRequired,message:r.a.shape({id:r.a.string.isRequired,author:r.a.object.isRequired,body:r.a.array.isRequired,lastActiveAt:r.a.instanceOf(Date)}).isRequired,conversationId:r.a.string,reactionsReply:r.a.shape({reactionIndex:r.a.number,reactionSet:r.a.array.isRequired}),onClose:r.a.func,onComposerClick:r.a.func,onReactionSelect:r.a.func,frameWindow:r.a.object,showUploadButton:r.a.bool,showGifButton:r.a.bool,showReplyToButton:r.a.bool,composerVisible:r.a.bool},note_Note.defaultProps={showUploadButton:!0,showGifButton:!0};var z={name:"fnfiys",styles:"right:0;left:0;margin:0 auto;"};const L=Object(u.c)(S.a,{target:"e1o2sc8n0"})("position:fixed;bottom:",Object(k.j)(),"px;right:",Object(u.f)("horizontalPaddingPx"),"px;width:342px;z-index:",Object(k.m)(1),";box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);",({theme:e})=>e.isLeftAlign&&Object(u.b)("left:",e.horizontalPaddingPx,"px;right:auto;")," ",({theme:e})=>e.isMobileSize&&z);function U(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class note_NoteFrame extends n.Component{constructor(...e){super(...e),U(this,"state",{height:0}),U(this,"handleHeightChange",({height:e})=>{this.setState({height:e})})}render(){const{conversationId:e,composerVisible:t,appName:o,message:i,reactionsReply:r,showUploadButton:n,showGifButton:a,onComposerClick:c,onReactionSelect:p,showReplyToButton:h,onClose:d}=this.props,{height:m}=this.state;return s.a.createElement(L,{style:{height:m},frameName:"intercom-note-frame",title:`Intercom live chat ${Object(l.e)("message")}`},l=>s.a.createElement("span",null,s.a.createElement(j.b,{id:"note-frame",key:"note-frame",onChange:this.handleHeightChange},s.a.createElement(note_Note,{frameWindow:l,conversationId:e,composerVisible:t,appName:o,message:i,reactionsReply:r,showUploadButton:n,showGifButton:a,onClose:d,onComposerClick:c,onReactionSelect:p,showReplyToButton:h})),s.a.createElement(T.a,{appWindow:l})))}}var $=o(649);function G(){return s.a.createElement($.a,{focusable:"false","aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16"},s.a.createElement("path",{d:"M7.357 1.071c.34-.035.679-.071.982-.071 3 0 6.304 2.054 6.625 5.59.018.214.036.428.036.642 0 3.054-2.518 6.179-6.357 6.697A6.958 6.958 0 0 1 7.75 14c-.357 0-.357 0-.75-.071-.91 1.178-1.982 1.482-3.16 1.696a3.184 3.184 0 0 1-.536.054c-.304 0-.733-.143-.536-.34.928-.785 1.036-1.303 1.036-2.214 0-.09 0-.179-.018-.268-1.625-1.107-2.536-2.571-2.75-4.446A7.753 7.753 0 0 1 1 7.768C1 4.714 3.518 1.589 7.357 1.07z"}))}var Y=o(469);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function K(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class pointer_Pointer extends n.Component{constructor(...e){super(...e),K(this,"node",void 0),K(this,"state",{isFooterVisible:!0,isScrolled:!1}),K(this,"footer",void 0),K(this,"handleScroll",e=>{const{isFooterVisible:t}=this.state,o=Object(M.l)(e.target);this.setState({isFooterVisible:t||o<=this.getFooterHeight(),isScrolled:e.target.scrollTop>0})}),K(this,"handleScrollable",e=>{const t=e.scrollHeight-e.clientHeight,o=this.state.isFooterVisible||void 0===this.props.reactionsReply||t<=this.getReactionsVisibilityThreshold();this.setState({isFooterVisible:o})}),K(this,"isReplyDisabled",()=>{const{replyType:e}=this.props.message;return"disabled"===e}),K(this,"addClickedComposerMetric",()=>{const{message:{id:e},conversationId:t}=this.props;Object(H.e)("clicked","composer","in_app","from_full",{message_type:"pointer",message_id:e,conversation_id:t})}),K(this,"handleComposerClick",()=>{this.addClickedComposerMetric(),this.props.onComposerClick()})}getReactionsVisibilityThreshold(){return this.getFooterHeight()+20}getFooterHeight(){return this.footer?this.footer.clientHeight:0}renderFooter(e){return this.isReplyDisabled()?null:s.a.createElement(Y.d,{ref:e=>this.footer=e,isFooterVisible:this.state.isFooterVisible},e?this.renderReactionPicker():this.renderChatComposer())}renderChatComposer(){return s.a.createElement(Y.c,{className:"intercom-pointer-composer",onClick:this.handleComposerClick},s.a.createElement("span",null,s.a.createElement(G,null)),s.a.createElement(g.f,null,Object(l.e)("start_a_conversation")))}renderReactionPicker(){const{reactionsReply:e,onReactionSelect:t}=this.props;return s.a.createElement(B.a,X({},e,{onReactionSelect:t}))}render(){const{appName:e,message:t,reactionsReply:o,onClose:i,frameWindow:r}=this.props,{author:n,lastActiveAt:a,body:c}=t;return s.a.createElement(Y.e,{isInbox:!1,isScrolled:this.state.isScrolled,ref:e=>this.node=e,className:"intercom-pointer"},s.a.createElement(N.a,{appName:e,isReplyStyle:!1,author:n,lastActiveAt:a},s.a.createElement(Y.b,{onClick:i,"aria-label":Object(l.e)("close")}," "),s.a.createElement(Y.a,{intercomRepliesDisabled:this.isReplyDisabled()},s.a.createElement(_.a,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},s.a.createElement(I.a,{blocks:c,zoomable:!0,frameWindow:r}))),this.renderFooter(o)))}}var J=o(676);const Q=Object(u.c)(S.a,{target:"e1lu8yo70"})("z-index:",Object(k.m)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);");function Z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class pointer_PointerFrame extends n.PureComponent{constructor(...e){super(...e),Z(this,"state",{width:0,height:0}),Z(this,"handleDimensionFrameSize",({height:e,width:t})=>{this.setState({width:t,height:e})})}frameStyles(){const{width:e,height:t}=this.state;return{width:e,height:t,opacity:1}}render(){const{appName:e,appWindow:t,message:o,conversationId:i,onClose:r,reactionsReply:n,onComposerClick:a,onReactionSelect:c}=this.props;return s.a.createElement(J.a,{appWindow:t,targetSelector:o.pointerSelector,childDimensions:this.frameStyles()},s.a.createElement(Q,{style:this.frameStyles(),frameName:"intercom-pointer-frame",title:`Intercom live chat ${Object(l.e)("pointer")}`},()=>s.a.createElement(j.b,{id:"pointer-frame",key:"pointer-frame",onChange:this.handleDimensionFrameSize},s.a.createElement(pointer_Pointer,{appName:e,message:o,conversationId:i,reactionsReply:n,frameWindow:t,onComposerClick:a,onReactionSelect:c,onClose:r}))))}}var ee=o(645),te=o(457),oe=o(674),ie=o(574),re=o.n(ie),ne=o(575),se=o.n(ne),ae={name:"siiwv4",styles:"&:hover .story-dismiss-button{opacity:1;}"};const ce=Object(u.c)("div",{target:"e18fd67o0"})("z-index:",Object(k.m)(1),";font-size:13px;font-family:",Object(u.f)("fontSansSerif"),";color:",Object(u.f)("bodyText"),";position:relative;",({theme:e,standalone:t})=>t&&Object(u.b)("position:fixed;bottom:",e.verticalPaddingPx,"px;right:",e.horizontalPaddingPx,"px;")," ",({isVideoLoaded:e})=>e&&ae," ",({theme:e})=>e.isLauncherEnabled&&Object(u.b)("bottom:",e.verticalPaddingPx+e.launcherOffsetBottomPaddingPx,"px;"));var le={name:"1c9b7w0",styles:"width:240px;height:180px;margin-left:10px;"},pe={name:"dxx3wj",styles:"margin-top:42px;"},he={name:"ajzub1",styles:"margin-top:54px;"};const de=Object(u.c)("div",{target:"e18fd67o1"})("position:relative;overflow:hidden;box-shadow:0px 2px 16px rgba(0,0,0,0.14),0px 1px 6px rgba(0,0,0,0.06);border-radius:5px;transition:transform 150ms ease,width 200ms ease,height 200ms ease,margin 200ms;transform-origin:bottom right;width:340px;height:255px;",({standalone:e})=>e&&he," ",({standalone:e,isExpanded:t})=>e&&t&&pe," ",({theme:e})=>e.isMobileSize&&le),me=Object(u.c)("div",{target:"e18fd67o2"})("position:absolute;top:0;/* @noflip */ right:0;display:block;opacity:0;transition:opacity 150ms ease;span{display:block;background-color:#5d6c80;opacity:0.8;color:",Object(u.f)("white"),";font-size:13px;height:32px;line-height:32px;padding:0 16px 0 16px;border-radius:16px;cursor:pointer;background-position:center;",Object(k.b)(re.a,se.a,"8px","8px"),";&:hover{opacity:1;}}"),ue=Object(u.c)("div",{target:"e18fd67o3"})("position:absolute;width:100%;z-index:",Object(k.m)(1),";top:0;left:0;right:0;bottom:0;cursor:pointer;"),ge=Object(u.c)("div",{target:"e18fd67o4"})({name:"maq7xh",styles:".chat-composer{margin-top:10px;}&.video-composer-enter{.chat-composer{display:block;height:0;opacity:0;overflow:hidden;padding-top:0;padding-bottom:0;margin-top:0;}.composer-placeholder,.composer-buttons{opacity:0;transition:opacity 200ms ease;transition-delay:200ms;}}&.video-composer-enter-active{.chat-composer{opacity:1;height:52px;padding-top:17px;padding-bottom:17px;transition-property:height,opacity,padding,margin;transition-duration:200ms;transition-timing-function:ease;margin-top:10px;}.composer-placeholder,.composer-buttons{opacity:1;}}"});var be=o(586);function fe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class story_Story extends n.Component{constructor(...e){super(...e),fe(this,"video",void 0),fe(this,"state",{isExpanded:!1,isVideoLoaded:!1}),fe(this,"handleOverlayClick",()=>{this.state.isVideoLoaded&&this.setState({isExpanded:!0})}),fe(this,"handleVideoLoaded",()=>{this.setState({isVideoLoaded:!0})})}renderDismissButton(){return this.props.standalone?s.a.createElement(me,{className:"story-dismiss-button",onClick:this.props.onClose},s.a.createElement("span",null)):null}renderOverlay(){return this.state.isExpanded?null:s.a.createElement(ue,{className:"story-overlay",onClick:this.handleOverlayClick})}renderComposer(){const{part:e,onComposerOrFormInputClick:t}=this.props,{firstName:o}=e.author;return s.a.createElement(te.CSSTransition,{classNames:"video-composer",timeout:{enter:400,exit:400}},s.a.createElement(ge,null,s.a.createElement(f,{className:"chat-composer",onClick:t,"aria-label":Object(l.e)("open_conversation_and_reply"),useBorderlessAvatarOffset:!1},s.a.createElement(v,{className:"composer-placeholder"},Object(l.e)("reply_to_name",{name:o})),s.a.createElement(y,{className:"composer-buttons"},s.a.createElement(O,null,s.a.createElement(d.a,null)),s.a.createElement(O,null,s.a.createElement(h.a,null))))))}renderSuggestions(){const{onSuggestionClicked:e,setComposerSuggestionsDismissed:t,conversationSuggestions:o,conversation:i}=this.props;return s.a.createElement(be.a,{conversation:i,conversationSuggestions:o,setComposerSuggestionsDismissed:t,onClick:e})}renderResponseArea(){return this.state.isExpanded&&this.props.showResponseArea?this.props.conversationSuggestions?this.renderSuggestions():this.renderComposer():null}render(){const{part:{body:e},autoPlay:t,standalone:o}=this.props,{isExpanded:i,isVideoLoaded:r}=this.state,{url:n,captions:a,thumbnailUrl:c}=e[0];return s.a.createElement(ce,{standalone:o,isVideoLoaded:r},this.renderDismissButton(),s.a.createElement(de,{standalone:o,isExpanded:i},this.renderOverlay(),s.a.createElement(oe.a,{srcUrl:n,autoPlay:t,onVideoLoaded:this.handleVideoLoaded,captions:a,thumbnailUrl:c})),s.a.createElement(te.TransitionGroup,null,this.renderResponseArea()))}}fe(story_Story,"defaultProps",{standalone:!1,onClose:()=>{},showResponseArea:!0,autoPlay:!1});const ve=Object(u.c)(S.a,{target:"elkwj510"})("z-index:",Object(k.m)(),";position:fixed;right:0;bottom:0;width:100vw;height:100vh;");function ye(e){const{conversation:t,standalone:o,part:i,onClose:r,onComposerOrFormInputClick:n,conversationSuggestions:a,onSuggestionClicked:c,setComposerSuggestionsDismissed:l}=e;return s.a.createElement(ve,{frameName:"intercom-story-frame"},e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(story_Story,{conversation:t,standalone:o,part:i,onClose:r,onComposerOrFormInputClick:n,conversationSuggestions:a,onSuggestionClicked:c,setComposerSuggestionsDismissed:l}),s.a.createElement(T.a,{appWindow:e})))}var Oe=o(451),Ce=o(2),xe=o(670),we=o(672),je=o(6);const Se=Object(u.c)("div",{target:"e19nv0ic0"})({name:"vavd1c",styles:"padding-top:0;/* @noflip */ padding-left:45px;"});function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function Ee(e,t){if(null==e)return{};var o,i,r=function(e,t){if(null==e)return{};var o,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)o=n[i],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function Pe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_conversation_composer_BorderlessConversationComposer extends n.PureComponent{constructor(...e){super(...e),Pe(this,"ref",void 0),Pe(this,"setRef",e=>{this.ref=e})}componentDidMount(){Object(je.o)(this.props.conversation)&&this.handleShow()}componentDidUpdate(e){!Object(je.o)(e.conversation)&&Object(je.o)(this.props.conversation)?this.handleShow():Object(je.o)(e.conversation)&&!Object(je.o)(this.props.conversation)&&this.handleHide()}handleShow(){this.props.handleComposerResize(this.getHeight())}handleHide(){this.props.onHide()}getHeight(){return this.ref?this.ref.clientHeight:0}render(){const e=this.props,{conversation:t,handleComposerResize:o}=e,i=Ee(e,["conversation","handleComposerResize"]);return Object(je.o)(t)?s.a.createElement(Se,{ref:this.setRef},s.a.createElement(we.a,ke({isBorderless:!0,conversation:t,onHeightChange:o},i))):null}}var Te=o(657),Re=o(612),_e={name:"1xzanuf",styles:"margin-right:0;"},Ie={name:"1v8x7dw",styles:"overflow:auto;"};const Ne=Object(u.c)("div",{target:"e1my0o560"})("overflow-anchor:none;max-height:100%;padding-top:10px;padding-right:10px;margin-right:-10px;",({enabledScroll:e})=>e&&Ie," ",({enabledScroll:e,visibleScrollbars:t})=>e&&t&&_e),Be=Object(u.c)("div",{target:"e1my0o561"})({name:"l57rop",styles:"padding-bottom:10px;"});var Me=o(22);function De(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_conversation_body_BorderlessConversationBody extends n.Component{constructor(...e){super(...e),De(this,"isPartBeingAddedTimeout",void 0),De(this,"firstRenderTimeout",void 0),De(this,"borderlessBodyNode",void 0),De(this,"visibleScrollbarsInOs",0!==Object(Re.a)()),De(this,"state",{isPartBeingAdded:!1,bottomScrollOffset:0,frameOffsetTop:this.props.frameNode.offsetTop,adminWasTyping:!1}),De(this,"recalculateOffsets",()=>{this.setState({frameOffsetTop:this.props.frameNode.offsetTop},()=>Object(M.z)(this.borderlessBodyNode))}),De(this,"handleScroll",e=>{this.state.isPartBeingAdded||(this.setState({bottomScrollOffset:Object(M.f)(this.borderlessBodyNode)}),Object(V.a)(e))})}componentDidMount(){Object(Me.a)(this.recalculateOffsets),this.firstRenderTimeout=setTimeout(()=>{Object(M.z)(this.borderlessBodyNode)},300)}componentDidUpdate(e){const{frameOffsetTop:t}=this.state,{conversation:o,frameNode:i}=this.props,{conversation:r}=e,n=o.parts.length!==r.parts.length,s=Object(Te.h)(o);(n||s&&!this.state.adminWasTyping)&&(Object(M.z)(this.borderlessBodyNode),this.setState({isPartBeingAdded:!0,bottomScrollOffset:0}),clearTimeout(this.isPartBeingAddedTimeout),this.isPartBeingAddedTimeout=setTimeout(()=>{this.setState({isPartBeingAdded:!1}),Object(M.z)(this.borderlessBodyNode)},300)),i.offsetTop!==t&&this.setState({frameOffsetTop:i.offsetTop},()=>{this.setState({bottomScrollOffset:Object(M.f)(this.borderlessBodyNode)})}),s!==this.state.adminWasTyping&&this.setState({adminWasTyping:s})}componentWillUnmount(){clearTimeout(this.isPartBeingAddedTimeout),clearTimeout(this.firstRenderTimeout),Object(Me.f)(this.recalculateOffsets)}getStyle(){const{borderlessNode:e,composerHeight:t}=this.props,o=e&&e.clientHeight,{frameOffsetTop:i}=this.state;if(!o||i)return;const r=o/100,n=100-10/r,s=`linear-gradient(to bottom, rgb(0, 0, 0), rgb(0, 0, 0) ${100-76/r}%, rgba(0, 0, 0, ${Math.max(1-this.state.bottomScrollOffset/100*5,0)}) ${n}%)`;return{maxHeight:`${o-t-20}px`,WebkitMaskImage:s,MaskImage:s}}render(){const e=0===this.state.frameOffsetTop;return s.a.createElement(Ne,{style:this.getStyle(),ref:e=>this.borderlessBodyNode=e,onScroll:this.handleScroll,enabledScroll:e,visibleScrollbars:this.visibleScrollbarsInOs},this.props.children())}}var Fe=o(681),He=o(502),Ae=o(501),Ve=o(579),We=o(652),qe=o(654),ze=o(510),Le=o(523);const Ue=Object(u.d)("0%{opacity:0;}50%{opacity:0;}100%{opacity:1;}"),$e={name:"1lh3dwn",styles:"opacity:1;transform:translateY(0);"},Ge=({theme:e})=>Object(u.b)("transform:translateY(4px);opacity:0;transition:all 120ms ease-out 80ms;span{display:block;background-color:#67788f;color:",e.white,";font-size:13px;height:32px;line-height:32px;padding:0 8px;border-radius:16px;cursor:pointer;background-position:center;&:hover{background-color:darken(#67788f,5%);}}",Ye.className,":hover &{",$e,"}"),Ye=Object(u.c)("div",{target:"es6hgh10"})("z-index:",Object(k.m)(),";position:absolute;right:0;bottom:0;width:360px;max-height:100%;outline-offset:-5px;",({theme:e,hasComposer:t})=>t&&Object(u.b)("animation:",(({theme:e})=>Object(u.d)("0%{transform:translateY(",e.borderlessComposerHeightPx,"px);}20%{transform:translateY(",e.borderlessComposerHeightPx,"px);}70%{transform:translateY(",e.borderlessComposerHeightPx,"px);}100%{transform:translateY(0);}"))({theme:e})," 750ms ease;")," ",ze.i.className,",",We.c.className,",",qe.a.className,"{position:absolute;bottom:21px;box-shadow:",Object(u.f)("notificationBoxShadow"),";border-radius:100%;}",Le.b.className,"{padding-left:0px !important;}"),Xe=Object(u.c)("div",{target:"es6hgh11"})("position:absolute;right:0;bottom:0;width:",Object(u.f)("borderlessConversationWidthPx"),"px;padding:10px;padding-top:50px;animation:",Ue," 500ms ease;",({theme:e})=>e.isLeftAlign&&Object(u.b)("width:",e.borderlessConversationWidthPx+e.borderlessAvatarOffsetWidthPx,"px;")),Ke=Object(u.c)("div",{target:"es6hgh12"})("z-index:",Object(k.m)(1),";position:absolute;top:0;width:",Object(u.f)("borderlessConversationWidthPx"),"px;height:40px;padding:0 10px;"),Je=Object(u.c)("div",{target:"es6hgh13"})({name:"ln0qgx",styles:"padding-top:10px;position:relative;/* @noflip */ margin-left:45px;text-align:center;"});var Qe={name:"whh5e5",styles:"opacity:1;"};const Ze=Object(u.c)("div",{target:"es6hgh14"})(Ge," position:absolute;top:10px;/* @noflip */ right:0;span{padding-right:16px;padding-left:16px;",Object(k.b)(re.a,se.a,"8px","8px"),"}",({theme:e})=>e.tabNavigation&&Qe);var et={name:"whh5e5",styles:"opacity:1;"};const tt=Object(u.c)("div",{target:"es6hgh15"})(Ge," display:inline-block;span{padding:0 20px;}",({theme:e})=>e.tabNavigation&&et);function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function it(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_conversation_BorderlessConversation extends n.Component{constructor(...e){super(...e),it(this,"state",{isEmojiPickerOpen:!1,isGifPickerOpen:!1,headerHeight:50,partsHeight:0,suggestionsHeight:0,composerHeight:0,replyToButtonHeight:0}),it(this,"handlePartsHeightChange",e=>{this.setState({partsHeight:e},this.handleHeightChange)}),it(this,"setSuggestionsHeight",e=>{this.setState({suggestionsHeight:e},this.handleHeightChange)}),it(this,"handleQuickRepliesHide",()=>{this.setState({suggestionsHeight:0},this.handleHeightChange)}),it(this,"handleComposerShow",e=>{this.setState({composerHeight:e},this.handleHeightChange)}),it(this,"handleComposerHide",()=>{this.setState({composerHeight:0},this.handleHeightChange)}),it(this,"handleReplyToButtonShow",e=>{this.setState({replyToButtonHeight:e},this.handleHeightChange)}),it(this,"handleClick",()=>{const{isEmojiPickerOpen:e,isGifPickerOpen:t}=this.state;e?this.setState({isEmojiPickerOpen:!1}):t&&this.setState({isGifPickerOpen:!1})}),it(this,"handleDismissClick",e=>{e.stopPropagation(),this.addCloseMetric(),this.props.onClose();const t=Object(Ae.f)();t&&t.focus()}),it(this,"handleEmojiPickerToggle",()=>{const e=!this.state.isEmojiPickerOpen;this.setState({isEmojiPickerOpen:e}),this.props.onPopoverToggle(e)}),it(this,"handleGifPickerToggle",()=>{const e=!this.state.isGifPickerOpen;this.setState({isGifPickerOpen:e}),this.props.onPopoverToggle(e)}),it(this,"handleViewMoreClick",()=>{this.addViewMoreMetric(),this.props.onViewMore()}),it(this,"handleHeightChange",()=>{this.props.onHeightChange(this.getHeight())})}componentDidMount(){this.props.onOpen(),this.focusTrap=new He.a({document:this.props.frameWindow.document})}componentDidUpdate(e){const{conversation:t}=this.props;"all"===t.fetchState&&Object(je.a)(t)>Object(je.a)(e.conversation)&&this.addReplyMetric(t)}componentWillUnmount(){this.focusTrap&&this.focusTrap.restore()}getHeight(){const{headerHeight:e,partsHeight:t,composerHeight:o,suggestionsHeight:i,replyToButtonHeight:r}=this.state;return e+t+o+i+r+20}getStyle(){return{height:this.getHeight()}}hasComposer(){const{parts:e,composerState:t}=this.props.conversation;return"attribute_collector"===e[0].replyType||t.visible}shouldRenderHeader(){const{isEmojiPickerOpen:e,isGifPickerOpen:t}=this.state;return!(e||t)}addViewMoreMetric(){Object(H.e)("clicked","viewmore_button","borderless","",{conversation_id:this.props.conversation.id})}addReplyMetric(){const{conversation:e}=this.props,t=Object(je.d)(e);Object(H.e)("received","reply","borderless","",{conversation_id:e.id,part_id:t.id,part_type:"adminReply",reply_type:t.replyType})}addCloseMetric(){Object(H.e)("closed","borderless","borderless","from_close_button",{conversation_id:this.props.conversation.id})}renderHeader(){return s.a.createElement(Ke,null,s.a.createElement(Je,null,this.props.hasHistory?this.renderViewMoreButton():null,s.a.createElement(Ze,{onClick:this.handleDismissClick,"aria-label":Object(l.e)("dismiss")},s.a.createElement("span",null))))}renderViewMoreButton(){return s.a.createElement(tt,{onClick:this.handleViewMoreClick},s.a.createElement("span",null,Object(l.e)("view_more")))}renderParts(){const{appName:e,userRole:t,conversation:o,onArticleCardClick:i,onReactionSelect:r,onRetry:n,frameWindow:a,conversationSuggestions:c}=this.props,{isEmojiPickerOpen:l,isGifPickerOpen:p}=this.state;return s.a.createElement(xe.a,{isBorderless:!0,isFaded:l||p,maxHeight:0,appName:e,userRole:t,conversation:o,frameWindow:a,onArticleCardClick:i,onHeightChange:this.handlePartsHeightChange,onReactionSelect:r,onRetry:n,conversationSuggestions:c})}renderSuggestions(){const{onSuggestionClicked:e,setComposerSuggestionsDismissed:t,conversationSuggestions:o,conversation:i}=this.props,r={conversation:i,setComposerSuggestionsDismissed:t,onClick:e,isBorderless:!0};return s.a.createElement(j.b,{onHeightChange:this.setSuggestionsHeight},s.a.createElement("div",null,s.a.createElement(Ve.a,{errorText:"Something went wrong loading the suggestions",align:"center",style:{marginBottom:"10px"}},s.a.createElement(be.a,ot({},r,{conversationSuggestions:o})))))}renderFooter(){const{isEmojiPickerOpen:e,isGifPickerOpen:t}=this.state,{showReplyToButton:o,onComposerClick:i,conversation:r,frameWindow:n}=this.props;return o&&Object(je.o)(this.props.conversation)?s.a.createElement(F.a,{isBorderless:!0,onShow:this.handleReplyToButtonShow,onClick:i}):s.a.createElement(borderless_conversation_composer_BorderlessConversationComposer,{conversation:r,showEmojiPicker:e,showGifPicker:t,handleComposerResize:this.handleComposerShow,onHide:this.handleComposerHide,onEmojiPickerToggle:this.handleEmojiPickerToggle,onGifPickerToggle:this.handleGifPickerToggle,frameWindow:n})}render(){const{conversation:e,frameNode:t}=this.props,{composerHeight:o}=this.state;return s.a.createElement(Ye,{className:"intercom-borderless",style:this.getStyle(),onClick:this.handleClick,tabIndex:"-1",role:"region",ref:e=>this.borderlessNode=e,hasComposer:this.hasComposer()},this.shouldRenderHeader()?this.renderHeader():null,s.a.createElement(Xe,null,s.a.createElement(borderless_conversation_body_BorderlessConversationBody,{conversation:e,composerHeight:o,borderlessNode:this.borderlessNode,frameNode:t},()=>s.a.createElement(Be,null,this.renderParts(),this.renderSuggestions())),this.renderFooter()),s.a.createElement(T.a,{appWindow:this.props.frameWindow}))}}borderless_conversation_BorderlessConversation.propTypes={conversation:r.a.shape({id:r.a.string.isRequired,userParticipated:r.a.bool.isRequired,fetchState:r.a.oneOf(["summary","partial","all"]),parts:r.a.arrayOf(r.a.shape({id:r.a.string,replyType:r.a.oneOf(["text","attribute_collector"])})).isRequired,composerState:r.a.shape({visible:r.a.bool.isRequired}).isRequired}),conversationSuggestions:r.a.shape({prompt:r.a.any,suggestions:r.a.arrayOf(r.a.shape({uuid:r.a.string.isRequired,text:r.a.string.isRequired,preAction:r.a.string}))}),onSuggestionClicked:r.a.func,setComposerSuggestionsDismissed:r.a.func,appName:r.a.string.isRequired,userRole:r.a.string.isRequired,hasHistory:r.a.bool,alignment:r.a.string,onOpen:r.a.func.isRequired,onHeightChange:r.a.func.isRequired,onPopoverToggle:r.a.func.isRequired,onArticleCardClick:r.a.func.isRequired,onReactionSelect:r.a.func.isRequired,onRetry:r.a.func.isRequired,onViewMore:r.a.func.isRequired,onClose:r.a.func.isRequired,onComposerClick:r.a.func.isRequired,frameWindow:r.a.any.isRequired,showReplyToButton:r.a.bool,part:r.a.object,frameNode:r.a.object.isRequired};const rt=Object(Fe.a)(borderless_conversation_BorderlessConversation);var nt=o(10),st=o(492),at=o(42),ct=o(5);var lt=o(58),pt=o(57);var ht=Object(Oe.connect)((e,t)=>{const{name:o}=e.app,{role:i}=e.user,{part:r,conversation:n}=t,{alignment:s}=Object(lt.a)(e),a=n.parts.filter(e=>e.createdAt>=r.createdAt);let{messageType:c}=a[0];c=c||"adminReply",a[0]=Object.assign({},a[0],{messageType:c});const l=a.length<n.parts.length;return{appName:o,userRole:i,conversation:Object.assign({},n,{parts:a}),hasHistory:l,alignment:s}},e=>({onOpen:t=>{e(function(e){return(t,o)=>{Object(at.a)(e)(o()).userParticipated?t(Object(ct.l)(Ce.b,e)).then(()=>{t({type:"OPEN_BORDERLESS_CONVERSATION",conversationId:e})}):t({type:"OPEN_BORDERLESS_CONVERSATION",conversationId:e})}}(t))},onRetry:(t,o)=>{e(Object(ct.q)(Ce.b,t,o))},onReactionSelect:(t,o)=>{e(Object(ct.k)(Ce.b,t,o,!1))},onArticleCardClick:(t,o)=>e(Object(st.g)(t,o,!1)),onViewMore:t=>{e(Object(nt.g)(t))},dismissConversation:t=>e(Object(pt.b)(Ce.b,[t]))}),(e,t,o)=>{const{conversation:i}=e,{id:r}=i,n={onOpen:()=>{t.onOpen(r)},onReactionSelect:e=>{t.onReactionSelect(r,e)},onRetry:e=>{t.onRetry(i,e)},onViewMore:()=>{t.onViewMore(r)},onClose:()=>{t.dismissConversation(r),o.onClose()}};return Object.assign({},e,t,o,n)})(rt),dt={name:"n7pinj",styles:"min-height:350px;"};const mt=Object(u.c)(S.a,{target:"eqgwjwo0"})("z-index:",Object(k.m)(),";position:fixed;width:360px;",({theme:e})=>Object(u.b)("bottom:",e.verticalPaddingPx-e.borderlessIframePaddingPx,"px;right:",e.horizontalPaddingPx-e.borderlessIframePaddingPx,"px;max-height:calc(100% - ",e.verticalPaddingPx-e.borderlessIframePaddingPx,"px);")," ",({isPopoverOpen:e})=>e&&dt," ",({theme:e})=>e.isLeftAlign&&Object(u.b)("left:",e.borderlessIframePaddingPx+e.horizontalPaddingPx-e.borderlessIframePaddingLeftPx+e.borderlessAvatarOffsetWidthPx,"px;right:auto;")," ",({theme:e})=>e.isLauncherEnabled&&Object(u.b)("bottom:",e.verticalPaddingPx+e.launcherOffsetBottomPaddingPx-e.borderlessIframePaddingPx,"px;max-height:calc( 100% - ",e.verticalPaddingPx+e.launcherOffsetBottomPaddingPx-e.borderlessIframePaddingPx,"px );"));function ut(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_BorderlessFrame extends n.Component{constructor(...e){super(...e),ut(this,"state",{height:0,isPopoverOpen:!1}),ut(this,"handleHeightChange",e=>{this.setState({height:e})}),ut(this,"handlePopoverToggle",e=>{this.setState({isPopoverOpen:e})})}render(){const{conversation:e,part:t,onClose:o,onComposerClick:i,showReplyToButton:r,conversationSuggestions:n,onSuggestionClicked:a,setComposerSuggestionsDismissed:c}=this.props,{isPopoverOpen:p,height:h}=this.state;return s.a.createElement(mt,{style:{height:h},className:"intercom-borderless-frame",frameName:"intercom-borderless-frame",title:`Intercom live chat ${Object(l.e)("message")}`,isPopoverOpen:p},(l,p)=>s.a.createElement(ht,{conversation:e,conversationSuggestions:n,onSuggestionClicked:a,setComposerSuggestionsDismissed:c,part:t,frameWindow:l,onClose:o,onHeightChange:this.handleHeightChange,onPopoverToggle:this.handlePopoverToggle,onComposerClick:i,showReplyToButton:r,frameNode:p}))}}borderless_BorderlessFrame.propTypes={conversation:r.a.object.isRequired,conversationSuggestions:r.a.shape({prompt:r.a.any,suggestions:r.a.arrayOf(r.a.shape({uuid:r.a.string.isRequired,text:r.a.string.isRequired,preAction:r.a.string}))}),onSuggestionClicked:r.a.func,setComposerSuggestionsDismissed:r.a.func,part:r.a.object.isRequired,onClose:r.a.func.isRequired,onComposerClick:r.a.func,showReplyToButton:r.a.bool};var gt=o(481);var bt=e=>`\n  z-index: 2147483003;\n  position: fixed;\n  width: 360px;\n  right: 10px;\n  bottom: 90px;\n  height: ${e.height}px;\n  max-height: calc( 100% - 90px );\n  border: none;\n  ${e.isPopoverOpen?"min-height: 350px;":""}\n`;function ft(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class borderless_CrossOriginBorderlessFrame extends n.Component{constructor(...e){super(...e),ft(this,"state",{height:0,isPopoverOpen:!1}),ft(this,"handleHeightChange",e=>{this.setState({height:e})}),ft(this,"handlePopoverToggle",e=>{this.setState({isPopoverOpen:e})})}render(){const{conversation:e,part:t,onClose:o,onComposerClick:i,showReplyToButton:r,conversationSuggestions:n,onSuggestionClicked:a,setComposerSuggestionsDismissed:c}=this.props,{height:l,isPopoverOpen:p}=this.state,h=bt({isPopoverOpen:p,height:l});return s.a.createElement(gt.a,{name:"borderless",styles:h},s.a.createElement(ht,{conversation:e,conversationSuggestions:n,onSuggestionClicked:a,setComposerSuggestionsDismissed:c,part:t,frameWindow:window,onClose:o,onHeightChange:this.handleHeightChange,onPopoverToggle:this.handlePopoverToggle,onComposerClick:i,showReplyToButton:r,frameNode:window.document.body}))}}var vt=o(3);function yt(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return message_Message}));class message_Message extends n.Component{constructor(...e){super(...e),yt(this,"addMessageMetric",e=>{const{conversation:t,part:{id:o,messageType:i}}=this.props;Object(H.e)(e,"message","in_app","from_full",{conversation_id:t.id,message_id:o,message_type:i})}),yt(this,"handleDismissClick",()=>{this.addMessageMetric("closed"),this.props.onClose()}),yt(this,"handleComposerSuggestionClicked",e=>{const{conversation:t,onSuggestionClicked:o}=this.props;o&&o(t,e)})}componentDidMount(){const{conversation:e,userIsPresent:t,onOpen:o,onConversationRead:i}=this.props;o(),!e.read&&t&&i(),this.addMessageMetric("received")}componentDidUpdate(){const{userIsPresent:e,conversation:t}=this.props;e&&!t.read&&this.props.onConversationRead()}renderBorderless(){const{conversation:e,part:t,onComposerOrFormInputClick:o,shouldShowUpfrontEmailComposer:i,onSuggestionClicked:r,setComposerSuggestionsDismissed:n,conversationSuggestions:a}=this.props,c=Object(vt.a)()?borderless_CrossOriginBorderlessFrame:borderless_BorderlessFrame;return s.a.createElement(c,{conversation:e,conversationSuggestions:a,onSuggestionClicked:r,setComposerSuggestionsDismissed:n,part:t,onClose:this.handleDismissClick,showReplyToButton:i,onComposerClick:o})}render(){const{appWindow:e,conversation:t,part:o,appName:i,isMobile:r,onComposerOrFormInputClick:n,onReactionSelect:a,showUploadButton:c,showGifButton:l,shouldShowUpfrontEmailComposer:p,onSuggestionClicked:h,setComposerSuggestionsDismissed:d,conversationSuggestions:m}=this.props,{messageType:u,reactionsReply:g}=o;switch(u){case"adminReply":case"link":case"messengerCard":case"notificationChannels":case"attributeCollector":case"conversationRating":case"chat":return r?s.a.createElement(R,{appName:i,part:o,onClose:this.handleDismissClick,composerState:t.composerState,onComposerOrFormInputClick:n}):this.renderBorderless();case"video":return s.a.createElement(ye,{conversation:t,conversationSuggestions:m,onSuggestionClicked:h,setComposerSuggestionsDismissed:d,standalone:!0,part:o,onClose:this.handleDismissClick,onComposerOrFormInputClick:n});case"note":return s.a.createElement(note_NoteFrame,{conversationId:t.id,composerVisible:t.composerState.visible,appName:i,message:o,reactionsReply:g,showUploadButton:c,showGifButton:l,onClose:this.handleDismissClick,onComposerClick:n,onReactionSelect:a,showReplyToButton:p});case"post":return s.a.createElement(ee.a,{conversationId:t.id,composerVisible:t.composerState.visible,appName:i,message:o,reactionsReply:g,onClose:this.handleDismissClick,onComposerClick:n,onReactionSelect:a,showReplyToButton:p});case"pointer":return s.a.createElement(pointer_PointerFrame,{appWindow:e,appName:i,message:o,conversationId:t.id,reactionsReply:g,onComposerClick:n,onReactionSelect:a,onClose:this.handleDismissClick})}}}message_Message.propTypes={appWindow:r.a.object,conversation:r.a.shape({id:r.a.string.isRequired,read:r.a.bool.isRequired,composerState:r.a.shape({visible:r.a.bool.isRequired}).isRequired}).isRequired,conversationSuggestions:r.a.shape({prompt:r.a.any,suggestions:r.a.arrayOf(r.a.shape({uuid:r.a.string.isRequired,text:r.a.string.isRequired,preAction:r.a.string}))}),onSuggestionClicked:r.a.func,setComposerSuggestionsDismissed:r.a.func,part:r.a.shape({id:r.a.string,messageType:r.a.string,reactionsReply:r.a.shape({reactionIndex:r.a.number,reactionSet:r.a.array.isRequired})}).isRequired,appName:r.a.string.isRequired,isMobile:r.a.bool.isRequired,userIsPresent:r.a.bool.isRequired,onConversationRead:r.a.func.isRequired,onOpen:r.a.func.isRequired,onClose:r.a.func.isRequired,onComposerOrFormInputClick:r.a.func.isRequired,onReactionSelect:r.a.func.isRequired,showUploadButton:r.a.bool,showGifButton:r.a.bool,shouldShowUpfrontEmailComposer:r.a.bool}},675:function(e,t,o){"use strict";var i=o(451),r=o(2),n=o(453),s=o.n(n),a=o(449),c=o.n(a),l=o(6),p=o(466),h=o(490),d=o(474),m=o(573),u=o(38),g=o(499),b=o(590),f=o(98),v=o(541),y=o(650),O=o(1);function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class snippet_Snippet extends a.Component{constructor(...e){super(...e),C(this,"addSnippetMetric",e=>{const{conversation:t}=this.props,o=Object(l.r)(t);Object(O.e)(e,"snippet","in_app","",{conversation_id:t.id,part_id:o.id,part_type:o.messageType})}),C(this,"addClickedMetric",()=>{this.addSnippetMetric("clicked")}),C(this,"handleClick",()=>{const{conversation:e,onClick:t}=this.props;this.addClickedMetric(),t(e)})}componentDidMount(){this.addSnippetMetric("received")}shouldRenderChatStyle(){const{conversation:e,stack:t}=this.props;return(Object(l.j)(e)||Object(l.i)(e))&&!t}getConversationParts(){return this.props.conversation.parts.filter(e=>!1===Object(f.a)(e.partType))}renderBody(e){if(1===e.length&&Object(g.c)(e[0]))return c.a.createElement(b.a,{text:Object(u.d)(e[0])});const{summaryText:t}=Object(u.e)(this.getConversationParts());return c.a.createElement(p.a,{text:t})}renderPlainStyle(e,t,o,i){return c.a.createElement(v.a,null,c.a.createElement(y.f,{className:"intercom-snippet",onClick:this.handleClick},c.a.createElement(h.a,{appName:o,author:e,isReplyStyle:i},c.a.createElement(y.e,null,this.renderBody(t)))))}renderChatStyle(e,t,o,i){return c.a.createElement(v.a,null,c.a.createElement(y.d,{className:"intercom-chat-snippet",onClick:this.handleClick},c.a.createElement(y.a,null,c.a.createElement(d.a,{author:e})),c.a.createElement(y.c,null,c.a.createElement(m.a,{author:e,appName:o,isReplyStyle:i}),c.a.createElement(y.b,null,this.renderBody(t)))))}render(){const{appName:e,conversation:{userParticipated:t}}=this.props,o=Object(l.d)(this.props.conversation);if(!o)return null;const{author:i,body:r}=o;return this.shouldRenderChatStyle()?this.renderChatStyle(i,r,e,t):this.renderPlainStyle(i,r,e,t)}}snippet_Snippet.defaultProps={stack:!1},snippet_Snippet.propTypes={conversation:s.a.shape({id:s.a.any.isRequired,parts:s.a.arrayOf(s.a.shape({author:s.a.object.isRequired,body:s.a.array.isRequired})).isRequired,userParticipated:s.a.bool.isRequired}).isRequired,appName:s.a.string.isRequired,stack:s.a.bool.isRequired,onClick:s.a.func.isRequired};var x=o(581);function w(e){const{conversation:t,appName:o,position:i,expanded:r,handleOnClick:n,stack:s}=e;return c.a.createElement(x.f,{position:i,expanded:r,key:t.id},c.a.createElement(snippet_Snippet,{conversation:t,appName:o,onClick:n,stack:s}))}var j=o(450),S={name:"1v8x7dw",styles:"overflow:auto;"};const k=Object(j.c)("div",{target:"e106pw6f0"})("max-height:",Object(j.e)("maxHeight"),"px;",({scroll:e})=>e&&S);var E=o(25),P=o(3);let T,R;function _(e){const{frameNode:t,children:o,keepScrollToBottom:i,scrollToBottomWithAnimation:r}=e,n=Object(P.a)()?"1000":(({offsetTop:e,clientHeight:t})=>e+t)(t),s=Object(a.useRef)(null),[l,p]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{if(Object(P.a)())return;const e=()=>{s.current&&Object(E.z)(s.current),T=window.parent.requestAnimationFrame(e)};return i&&s.current&&e(),()=>window.parent.cancelAnimationFrame(T)},[i]),Object(a.useEffect)(()=>{Object(P.a)()||r&&s.current&&Object(E.e)(s.current)},[r]),Object(a.useEffect)(()=>{if(!Object(P.a)())return R=setTimeout(()=>p(!0),300),()=>{clearTimeout(R),window.parent.cancelAnimationFrame(T)}},[]),c.a.createElement(k,{maxHeight:n,ref:s,scroll:l},o)}var I=o(8);const N=(e,t)=>e-t;let B,M,D;function F(e){const{conversations:t,appName:o,handleOnClick:i,children:r,frameNode:n}=e,s=t.filter(e=>!!Object(l.d)(e)),p=s.length*x.b,h=x.b+(s.length-1)*x.c,d=Object(I.i)(),[m,u]=Object(a.useState)(!1),[g,b]=Object(a.useState)(h),[f,v]=Object(a.useState)(!1),y=e=>{const t=s.map(e=>e.id);u(e),(e=>{Object(O.e)("hovered","message","in_app","from_grouped_message",{conversation_ids:e.join(",")})})(t),e?(clearTimeout(D),v(!0),B=setTimeout(()=>b(p),1),M=setTimeout(()=>v(!1),x.a)):D=setTimeout(()=>b(h),x.a)};return Object(a.useEffect)(()=>()=>{clearTimeout(B),clearTimeout(M),clearTimeout(D)},[]),c.a.createElement(_,{frameNode:n,keepScrollToBottom:f,scrollToBottomWithAnimation:!m},c.a.createElement(x.g,{onMouseEnter:()=>!d&&y(!0),onMouseLeave:()=>!d&&y(!1),onFocus:()=>!d&&y(!0),"aria-expanded":m},c.a.createElement(x.e,{expandAnimationInProgress:f},r),c.a.createElement(x.h,{height:g},s.map((e,t)=>c.a.createElement(w,{key:t,conversation:e,appName:o,position:N(s.length,t),expanded:m,handleOnClick:i,stack:s.length>1})))))}var H=o(33),A=o(491),V=o(502),W=o(501);class notifications_Notifications extends a.Component{constructor(...e){var t,o,i;super(...e),i=()=>{const{onNotificationDismiss:e,conversations:t}=this.props,o=t.map(e=>e.id);this.addDismissMetrics(o),e(o);const i=Object(W.f)();i&&i.focus()},(o="handleDismiss")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}componentDidMount(){const{onDisplayNotifications:e}=this.props,t=this.getSortedConversations();this.focusTrap=new V.a({document:this.props.frameWindow.document}),e(t)}componentWillUnmount(){this.focusTrap&&this.focusTrap.restore()}addDismissMetrics(e){e.forEach(e=>{Object(O.e)("closed","message","in_app","from_snippet",{conversation_id:e})})}getSortedConversations(){return this.props.conversations.slice(-3).sort((e,t)=>e.lastPartCreatedAt>t.lastPartCreatedAt)}renderDismissButton(){const{conversations:e}=this.props,t=1===e.length?Object(H.e)("clear"):Object(H.e)("clear_all");return c.a.createElement(v.b,{onClick:this.handleDismiss,visibleDismissButton:Object(I.i)()},t,c.a.createElement(v.c,null))}renderConversationsGrouped(){const{appName:e,onNotificationClick:t,frameNode:o}=this.props,i=this.getSortedConversations();return c.a.createElement(F,{conversations:i,appName:e,handleOnClick:t,frameNode:o},i.length>0?this.renderDismissButton():null)}render(){const{frameWindow:e}=this.props;return c.a.createElement(v.d,{className:"intercom-notifications"},this.renderConversationsGrouped(),c.a.createElement(A.a,{appWindow:e}))}}notifications_Notifications.propTypes={appName:s.a.string.isRequired,frameNode:s.a.any.isRequired,frameWindow:s.a.any.isRequired,conversations:s.a.array.isRequired,onNotificationClick:s.a.func.isRequired,onNotificationDismiss:s.a.func.isRequired,onDisplayNotifications:s.a.func.isRequired};var q=o(5),z=o(10),L=o(65),U=o(57),$=o(41);t.a=Object(i.connect)(e=>{const{app:{name:t}}=e;return{appName:t,conversations:Object($.a)(e)}},e=>({onNotificationClick:t=>{const{id:o,parts:i}=t,n=i[i.length-1],{messageType:s}=n;[void 0,"chat","link","notificationChannels","video"].indexOf(s)>-1?(e(Object(z.f)(o)),e(Object(q.l)(r.b,o))):e(Object(L.b)(o,n.id))},onNotificationDismiss:t=>{e(Object(U.b)(r.b,t))},onDisplayNotifications:t=>{t.forEach(t=>{const{id:o,parts:i}=t,r=i[i.length-1];e(Object(L.c)(o,r.id))})}}))(notifications_Notifications)},676:function(e,t,o){"use strict";var i=o(66),r=o.n(i),n=o(76),s=o.n(n),a=o(449),c=o.n(a),l=o(856),p=o.n(l),h=o(479),d=o.n(h);function m(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class positioner_tree_PositionerTree extends a.Component{constructor(...e){super(...e),m(this,"document",this.props.appWindow.document),m(this,"state",{container:null})}componentDidMount(){const{appWindow:e}=this.props,t=e.document.querySelector("#intercom-container");if(!e.document.body)return;const o=e.document.createElement("div");o.id="intercom-positioner-tree",o.classList.add("intercom-namespace"),o.style.cssText="position: initial; !important; z-index: 2147483647 !important;",t.insertAdjacentElement("beforeBegin",o),this.setState({container:o})}componentWillUnmount(){const e=this.state.container;if(!e)return;const t=e.parentNode;t&&t.removeChild(e)}render(){return this.state.container?d.a.createPortal(this.props.children,this.state.container):null}}var u=o(25),g=o(8),b=e=>{if(e.IntercomIntersectionObserver)return;const t=e.document;if(!g.a.isFirefox()&&"IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype&&"isIntersecting"in e.IntersectionObserverEntry.prototype)return e.IntercomIntersectionObserver=e.IntersectionObserver,e.IntercomIntersectionObserverEntry=e.IntersectionObserverEntry,!0;var o=[];function i(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,o=t.width*t.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=o?r/o:this.isIntersecting?1:0}function r(e,t){var o,i,r,n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(o=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout((function(){o(),r=null}),i))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function n(e,t,o,i){null!=e&&("function"==typeof e.addEventListener?e.addEventListener(t,o,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,o))}function s(e,t,o,i){null!=e&&("function"==typeof e.removeEventListener?e.removeEventListener(t,o,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,o))}function a(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(e,t){for(var o=t;o;){if(o==e)return!0;o=l(o)}return!1}function l(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,o){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==o[t-1]}))},r.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(e,"resize",this._checkForIntersections,!0),this._observationTargets.forEach(e=>{this._monitorScrollForElement(e)}),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._monitorScrollForElement=function(e){e!==t&&e&&(n(e,"scroll",this._checkForIntersections,!0),this._monitorScrollForElement(e.parent))},r.prototype._unmonitorScrollForElement=function(e){e!==t&&e&&(s(e,"scroll",this._checkForIntersections,!0),this._unmonitorScrollForElement(e.parent))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),this._observationTargets.forEach(e=>{this._unmonitorScrollForElement(e)}),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),o=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var n=r.element,s=a(n),c=this._rootContainsTarget(n),l=r.entry,p=t&&c&&this._computeTargetAndRootIntersection(n,o),h=r.entry=new i({time:e.performance&&performance.now&&performance.now(),target:n,boundingClientRect:s,rootBounds:o,intersectionRect:p});l?t&&c?this._hasCrossedThreshold(l,h)&&this._queuedEntries.push(h):l&&l.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(o,i){if("none"!=e.getComputedStyle(o).display){for(var r,n,s,c,p,h,d,m,u=a(o),g=l(o),b=!1;!b;){var f=null,v=1==g.nodeType?e.getComputedStyle(g):{};if("none"==v.display)return;if(g==this.root||g==t?(b=!0,f=i):g!=t.body&&g!=t.documentElement&&"visible"!=v.overflow&&(f=a(g)),f&&(r=f,n=u,s=void 0,c=void 0,p=void 0,h=void 0,d=void 0,m=void 0,s=Math.max(r.top,n.top),c=Math.min(r.bottom,n.bottom),p=Math.max(r.left,n.left),h=Math.min(r.right,n.right),m=c-s,!(u=(d=h-p)>=0&&m>=0&&{top:s,bottom:c,left:p,right:h,width:d,height:m})))break;g=l(g)}return u}},r.prototype._getRootRect=function(){var e;if(this.root)e=a(this.root);else{var o=t.documentElement,i=t.body;e={top:0,left:0,right:o.clientWidth||i.clientWidth,width:o.clientWidth||i.clientWidth,bottom:o.clientHeight||i.clientHeight,height:o.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,o){return"px"==t.unit?t.value:t.value*(o%2?e.width:e.height)/100})),o={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return o.width=o.right-o.left,o.height=o.bottom-o.top,o},r.prototype._hasCrossedThreshold=function(e,t){var o=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(o!==i)for(var r=0;r<this.thresholds.length;r++){var n=this.thresholds[r];if(n==o||n==i||n<o!=n<i)return!0}},r.prototype._rootIsInDom=function(){return!this.root||c(t,this.root)},r.prototype._rootContainsTarget=function(e){return c(this.root||t,e)},r.prototype._registerInstance=function(){o.indexOf(this)<0&&o.push(this)},r.prototype._unregisterInstance=function(){var e=o.indexOf(this);-1!=e&&o.splice(e,1)},e.IntercomIntersectionObserver=r,e.IntercomIntersectionObserverEntry=e.IntersectionObserverEntry};var f=e=>{var t=e,o=e.document,i=t.HTMLElement||t.Element,r={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy||t.intercomScrollBy,elementScroll:c,intercomScrollIntoView:i.prototype.intercomScrollIntoView},n=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now;var s,a=(s=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(s)?1:0);function c(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function p(e,t){return"Y"===t?e.clientHeight+a<e.scrollHeight:"X"===t?e.clientWidth+a<e.scrollWidth:void 0}function h(e,o){var i=t.getComputedStyle(e,null)["overflow"+o];return"auto"===i||"scroll"===i}function d(e){var t=p(e,"Y")&&h(e,"Y"),o=p(e,"X")&&h(e,"X");return t||o}function m(e){var t;do{t=(e=e.parentNode)===o.body}while(!1===t&&!1===d(e));return t=null,e}function u(e){var o,i,r,s,a=(n()-e.startTime)/800;s=a=a>1?1:a,o=.5*(1-Math.cos(Math.PI*s)),i=e.startX+(e.x-e.startX)*o,r=e.startY+(e.y-e.startY)*o,e.method.call(e.scrollable,i,r),i===e.x&&r===e.y||t.requestAnimationFrame(u.bind(t,e))}function g(e,i,s){var a,l,p,h,d=n();e===o.body?(a=t,l=t.scrollX||t.pageXOffset,p=t.scrollY||t.pageYOffset,h=r.scroll):(a=e,l=e.scrollLeft,p=e.scrollTop,h=c),u({scrollable:a,method:h,startTime:d,startX:l,startY:p,x:i,y:s})}t.intercomScrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?r.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):g.call(t,o.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},i.prototype.intercomScrollIntoView=function(){if(!0!==l(arguments[0])){var e=m(this),i=e.getBoundingClientRect(),n=this.getBoundingClientRect();e!==o.body?(g.call(this,e,e.scrollLeft+n.left-i.left,e.scrollTop+n.top-i.top),"fixed"!==t.getComputedStyle(e).position&&t.intercomScrollBy({left:i.left,top:i.top,behavior:"smooth"})):t.intercomScrollBy({left:n.left,top:n.top,behavior:"smooth"})}else r.intercomScrollIntoView.call(this,void 0===arguments[0]||arguments[0])}};var v=o(857);const y=(e,t)=>{const o=t.element;if(!o)return e;const i=e.placement.split("-")[0],{popper:r,reference:n}=e.offsets,s=-1!==["left","right"].indexOf(i),a=s?"height":"width",c=s?"Top":"Left",l=c.toLowerCase(),p=s?"left":"top",h=s?"bottom":"right",d=Object(v.getOuterSizes)(o)[a];n[h]-d<r[l]&&(e.offsets.popper[l]-=r[l]-(n[h]-d)),n[l]+d>r[h]&&(e.offsets.popper[l]+=n[l]+d-r[h]),e.offsets.popper=Object(v.getClientRect)(e.offsets.popper);const m=n[l]+n[a]/2-d/2,u=Object(v.getStyleComputedProperty)(e.instance.popper),g=parseFloat(u[`margin${c}`]),b=parseFloat(u[`border${c}Width`]);let f=m-e.offsets.popper[l]-g-b;return f=Math.max(Math.min(r[a]-d-32,f),0),e.arrowElement=o,e.offsets.arrow={[l]:Math.round(f),[p]:""},e};var O=o(655);function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class event_blocker_EventBlocker extends a.Component{constructor(...e){super(...e),C(this,"eventBlockerRef",void 0),C(this,"stopBubbling",e=>{"click"===e.type&&this.props.onClickEvent&&this.props.onClickEvent(),e.stopPropagation()})}componentDidMount(){this.eventBlockerRef&&this.props.events.forEach(e=>{Object(u.c)(this.eventBlockerRef,e,this.stopBubbling)})}componentWillUnmount(){this.eventBlockerRef&&this.props.events.forEach(e=>{Object(u.y)(this.eventBlockerRef,e,this.stopBubbling)})}render(){return c.a.createElement("div",{className:"event-blocker",ref:e=>this.eventBlockerRef=e},this.props.children)}}function x(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function w(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?x(o,!0).forEach((function(t){j(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):x(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function j(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return positioner_Positioner}));class positioner_Positioner extends a.Component{constructor(...e){super(...e),j(this,"arrow",void 0),j(this,"node",void 0),j(this,"arrowContainer",void 0),j(this,"positioner",void 0),j(this,"targetInDom",void 0),j(this,"IntersectionObserver",void 0),j(this,"missingSelectorTimeout",void 0),j(this,"scrollIntoViewTimeout",void 0),j(this,"repositionCheckTimeout",void 0),j(this,"mutationObserver",void 0),j(this,"state",{styles:null,arrowStyles:null,hide:!1,nodeInViewPort:!1,nodeIsEntirelyInViewport:!1,positionerOffsetForMask:{left:0,top:0},placement:null,maskStyles:{padding:0,top:0,left:0,width:0,height:0}}),j(this,"targetWithClickHandler",null),j(this,"updateElementPosition",e=>{const{styles:t,arrowStyles:o}=e;return this.setState({styles:t,hide:!this.targetIsVisible(),arrowStyles:o}),e.attributes&&this.applyAttributes(e.attributes),this.checkIfRepositionRequired(e),e}),j(this,"updateMaskPosition",()=>{const e=this.getMaskStyles();s()(this.state.maskStyles,e)||this.setState({maskStyles:e})}),j(this,"handleOverlayClick",()=>{this.scrollIntoView(),this.props.onOverlayClick&&this.props.onOverlayClick()}),j(this,"handleTargetClick",()=>{this.props.onTargetClick&&this.props.onTargetClick()}),j(this,"handlePlacementChange",()=>{this.props.onPlacementChange&&this.state.placement&&this.props.onPlacementChange(this.state.placement)}),j(this,"renderOverlay",()=>{const e=this.getTargetNode();return this.props.renderOverlay(this.handleOverlayClick,this.props,e)})}reinitializeObjects(){this.initializeIntersectionObserver(),this.initializePositioner(),this.setupTargetClickHandler()}componentDidMount(){this.initializeMutationObserver(),this.reinitializeObjects(),this.updateMaskPosition()}shouldComponentUpdate(e,t){return!s()(this.props,e)||!s()(this.state,t)}componentDidUpdate(e,t){e.targetSelector!==this.props.targetSelector?this.reinitializeObjects():this.positioner?this.positioner.scheduleUpdate():this.reinitializeObjects(),t.placement!==this.state.placement&&this.handlePlacementChange()}componentWillUnmount(){const{appWindow:e}=this.props;this.destroyIntersectionObserver(),this.destroyPositioner(),this.destroyTargetClickHandler(),(e=>{e.IntercomIntersectionObserver&&(delete e.IntercomIntersectionObserver,delete e.IntercomIntersectionObserverEntry)})(e),(e=>{var t=e;(t.HTMLElement||t.Element).prototype.intercomScrollIntoView=null,t.intercomScrollBy&&delete t.intercomScrollBy})(e),this.missingSelectorTimeout&&clearTimeout(this.missingSelectorTimeout),this.scrollIntoViewTimeout&&clearTimeout(this.scrollIntoViewTimeout),this.repositionCheckTimeout&&clearTimeout(this.repositionCheckTimeout),this.mutationObserver&&this.mutationObserver.disconnect()}getTargetNode(){const{targetSelector:e,appWindow:t}=this.props;try{return t.document.querySelector(e)}catch(e){return null}}setupTargetClickHandler(){this.destroyTargetClickHandler(),this.targetWithClickHandler=this.getTargetNode(),this.targetWithClickHandler&&Object(u.c)(this.targetWithClickHandler,"click",this.handleTargetClick,!0)}destroyTargetClickHandler(){this.targetWithClickHandler&&Object(u.y)(this.targetWithClickHandler,"click",this.handleTargetClick)}storeMaskOffsetsBasedOnFlipPosition(e){const{scrollable:t}=this.props;if(!t)return;const o=e["x-placement"];switch(o){case"bottom":this.setState({placement:o,positionerOffsetForMask:{left:0,top:3}});break;case"top":this.setState({placement:o,positionerOffsetForMask:{left:0,top:-3}});break;case"left":this.setState({placement:o,positionerOffsetForMask:{left:-5,top:0}});break;case"right":this.setState({placement:o,positionerOffsetForMask:{left:3,top:0}});break;default:return}}applyAttributes(e){[this.arrowContainer,this.node].forEach(t=>{t&&"function"==typeof t.querySelectorAll&&Object.keys(e).forEach(o=>{t&&t.setAttribute&&t.setAttribute(o,e[o])}),this.storeMaskOffsetsBasedOnFlipPosition(e)})}checkIfRepositionRequired(e){const{styles:t,attributes:o}=e;if(this.repositionCheckTimeout&&clearTimeout(this.repositionCheckTimeout),o&&!1!==o["x-out-of-boundaries"]&&t&&t.transform){const e=(t.transform.match(/(-{0,1}\d+)px/g)||[]).map(e=>Number(e.replace("px",""))),o=parseInt(e[0]),i=parseInt(e[1]);o<0&&i<0&&(this.repositionCheckTimeout=setTimeout(()=>{this.nodeIsVisible()&&this.reinitializeObjects()},500))}}targetIsVisible(){const{nodeInViewPort:e}=this.state;if(!e)return!1;const t=this.getTargetNode();return Object(u.u)(t)}scrollIntoView(){const{appWindow:e}=this.props;f(e),this.scrollIntoViewTimeout=setTimeout(()=>{const{nodeIsEntirelyInViewport:e}=this.state,t=this.getTargetNode();t&&!e&&(t.intercomScrollIntoView?t.intercomScrollIntoView({behavior:"smooth",block:"center",inline:"center"}):t.scrollIntoView&&t.scrollIntoView(!0,{behaviour:"smooth"}))},200)}initializeMutationObserver(){const{appWindow:e}=this.props;this.targetInDom=!!this.getTargetNode(),this.mutationObserver=new MutationObserver(()=>{this.targetInDom&&!this.getTargetNode()&&(this.targetInDom=!1,this.destroyPositioner(),this.forceUpdate()),!this.targetInDom&&this.getTargetNode()&&(this.targetInDom=!0,this.forceUpdate()),this.updateMaskPosition()}),this.mutationObserver.observe(e.document.body,{attributes:!0,subtree:!0,childList:!0})}initializePositioner(){const{scrollable:e}=this.props,t=this.getTargetNode();t&&this.node&&(e&&this.scrollIntoView(),this.positioner=new p.a(t,this.node,{positionFixed:!1,placement:"auto",modifiers:{applyStyle:{enabled:!1},preventOverflow:{boundariesElement:"viewport"},arrow:{enabled:!0,element:this.arrow,fn:y},updateElementPosition:{enabled:!0,fn:this.updateElementPosition,order:900}}}))}initializeIntersectionObserver(){const{appWindow:e}=this.props,t=this.getTargetNode();t&&(e.IntercomIntersectionObserver||b(e),this.IntersectionObserver=new e.IntercomIntersectionObserver(e=>{if(0===e.length)return;const{isIntersecting:o,intersectionRatio:i}=r()(e,["time"],["desc"])[0],n=o,s=o&&Object(u.u)(t),a=1===i;this.setState({hide:!s,nodeInViewPort:n,nodeIsEntirelyInViewport:a})},{threshold:.05}),this.IntersectionObserver.observe(t))}destroyPositioner(){this.positioner&&(this.positioner.destroy(),delete this.positioner)}destroyIntersectionObserver(){this.IntersectionObserver&&this.IntersectionObserver.disconnect()}reinitializePointer(){this.destroyPositioner(),this.initializePositioner()}reinitializeIntersectionObserver(){this.destroyIntersectionObserver(),this.initializeIntersectionObserver()}mergedStyles(){const{scrollable:e}=this.props,{styles:t,positionerOffsetForMask:o}=this.state;if(!t)return{};if(!e)return t;const{left:i,top:r}=o;return w({},t,{left:t.left+i,top:t.top+r})}nodeIsVisible(){const e=this.getTargetNode();return e&&Object(u.u)(e)}getStyles(){const{hideArrow:e}=this.props,{height:t,width:o,opacity:i}=this.props.childDimensions||{},r=e?5:15;if(this.nodeIsVisible()){const e=!this.state.hide&&t&&o&&i?1:0;return this.onSelectorMatch(),w({},this.mergedStyles(),{opacity:e,margin:r})}if(this.props.renderFallback){const{opacity:e}=this.props.childDimensions||{};return this.props.targetSelector&&this.onMissingSelector(),{position:"fixed",top:`calc(50% - ${(t||0)/2}px)`,left:`calc(50% - ${(o||0)/2}px)`,opacity:e,margin:r}}}getArrowStyles(){const{arrowStyles:e,hide:t}=this.state,{height:o,width:i}=this.props.childDimensions||{},r=!t&&o&&i?1:0;return e?{top:e.top,left:e.left,opacity:r}:{opacity:r}}getMaskStyles(){const e=this.getTargetNode();if(!e||!this.props.scrollable||this.state.hide)return{padding:0,top:0,left:0,width:0,height:0};const{top:t,left:o,width:i,height:r}=e.getBoundingClientRect(),{appWindow:n}=this.props;return{padding:3,top:t-3+n.pageYOffset,left:o-3+n.pageXOffset,width:i,height:r}}renderArrow(){return c.a.createElement(O.b,{style:w({},this.getArrowStyles()),ref:e=>this.arrow=e},c.a.createElement(O.a,{frameName:"intercom-positioner-arrow-frame"},()=>c.a.createElement(O.e,{style:{display:this.props.hideArrow?"none":"block"},ref:e=>this.arrowContainer=e})))}onMissingSelector(){this.missingSelectorTimeout||(this.missingSelectorTimeout=setTimeout(()=>{!this.nodeIsVisible()&&this.props.onMissingSelector&&this.props.onMissingSelector()},300))}onSelectorMatch(){this.props.onSelectorMatch&&this.props.onSelectorMatch()}render(){const{scrollable:e,shouldAnimate:t,renderFallback:o,children:i,appWindow:r}=this.props,n=this.getTargetNode();if(!n&&!o)return null;const{maskStyles:s}=this.state,{width:a,height:l}=s;return c.a.createElement(positioner_tree_PositionerTree,{appWindow:r},c.a.createElement(c.a.Fragment,null,c.a.createElement(O.g,{ref:e=>this.node=e,style:this.getStyles()},c.a.createElement(O.d,null,this.nodeIsVisible()?this.renderArrow():null,this.targetIsVisible()||o?i:null)),c.a.createElement(O.f,{style:s,isStep:e&&!!n,isPost:e&&!n,isAnimating:t,height:l,width:a}),c.a.createElement(event_blocker_EventBlocker,{events:["auxclick","click","dblclick","mousedown","mouseup"],onClickEvent:()=>this.handleOverlayClick()},this.renderOverlay())))}}j(positioner_Positioner,"defaultProps",{hideArrow:!1,renderFallback:!1,shouldAnimate:!1,renderOverlay:(e,{scrollable:t})=>c.a.createElement(O.c,{onClick:e,scrollable:t,tabIndex:"-1"})})},874:function(e,t,o){"use strict";o.r(t);var i=o(451),r=o(21),n=o(32),s=o(449),a=o.n(s),c=o(476),l=o.n(c),p=o(465),h=o(489),d=o(33),m=o(490),u=o(544),g=o(7),b=o(450),f={name:"isshev",styles:"padding:25px 0px;"};const v=Object(b.c)("div",{target:"e1mknya50"})("position:relative;padding:8px;order:0;flex:0 1 100%;align-self:auto;display:flex;justify-content:flex-end;align-items:center;border-top:1px solid #eee;",({hideButton:e})=>e&&f," ",({isVideoStep:e})=>e&&Object(b.b)("transition:transform 300ms cubic-bezier(0.165,0.84,0.44,1),opacity 10ms;transform:translateY(100%);margin-top:4px;border-radius:5px;position:absolute;bottom:0;left:0;right:0;border:0;opacity:0;",j.className,"{color:#fff;font-size:14px;}")),y=Object(b.c)("div",{target:"e1mknya51"})("flex:0 1 auto;position:relative;button{font-size:14px;background-color:",Object(b.f)("appColor"),";color:white;font-weight:bold;padding:10px 20px;border-radius:4px;cursor:pointer;}button[disabled]{opacity:0.6;}",({animating:e})=>e&&Object(b.b)("animation:",O()," 500ms;")),O=()=>Object(b.d)("0%{",x,";}25%{",C,";}49%{",x,";}50%{",x,";}75%{",w,";}100%{",x,";}"),C={name:"1ldqog6",styles:"transform:scale(1.1);"},x={name:"41q668",styles:"transform:scale(1);"},w={name:"kp0j2p",styles:"transform:scale(1.05);"},j=Object(b.c)("div",{target:"e1mknya52"})("position:absolute;left:0;right:0;text-align:center;color:",Object(b.f)("installGrey1"),";font-size:14px;");function S(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class tour_step_footer_TourStepFooter extends s.Component{constructor(...e){super(...e),S(this,"button",void 0),S(this,"disabledButton",void 0),S(this,"inputFieldValidation",void 0),S(this,"state",{buttonIsAnimating:!1,disabledButton:!1}),S(this,"finishButtonAnimation",()=>{this.button&&this.setState({buttonIsAnimating:!1})}),S(this,"validateInput",()=>{this.setState({disabledButton:!0}),this.inputFieldValidation=new g.c(this.props.selector,e=>{this.setState({disabledButton:!e})}),this.inputFieldValidation.run()}),S(this,"handleOnContinue",()=>{this.state.disabledButton||this.props.onContinue()})}componentDidMount(){this.button&&this.button.addEventListener("animationend",this.finishButtonAnimation),"type"===this.props.progressionBehavior&&this.validateInput()}componentDidUpdate(){const{resetOverlayClick:e}=this.props;this.props.hasClickedOverlay&&(this.setState({buttonIsAnimating:!0}),e())}componentWillUnmount(){this.inputFieldValidation&&this.inputFieldValidation.destroy()}render(){const e="click"!==this.props.progressionBehavior;return a.a.createElement(v,{hideButton:!e,isVideoStep:this.props.isVideoStep},a.a.createElement(j,null,Object(d.e)("product_tours_tour_step_number",{start_number:this.props.activeStepIndex+1,end_number:this.props.stepCount})),e&&a.a.createElement(y,{animating:this.state.buttonIsAnimating,ref:e=>this.button=e,"aria-label":this.props.activeStepIndex+1===this.props.stepCount?Object(d.e)("product_tours_done"):Object(d.e)("product_tours_next"),role:"button"},a.a.createElement("button",{disabled:this.state.disabledButton,onClick:this.handleOnContinue,tabIndex:"0"},this.props.activeStepIndex+1===this.props.stepCount?Object(d.e)("product_tours_done"):Object(d.e)("product_tours_next"))))}}var k=o(499),E=o(647),P=o(473);var T=o.p+"images/video-mask.835382d2.svg";var R=o.p+"images/video-mask-right.f31df601.svg",_=o(588),I=o(538),N=o(569);const B=Object(b.c)("div",{target:"e1ggaaxy0"})("opacity:0;position:absolute;left:0;top:0;cursor:pointer;right:0;bottom:0;background:rgba(0,0,0,0.4);transition:opacity 300ms cubic-bezier(0.165,0.84,0.44,1);",_.b.className,"{right:50%;bottom:50%;margin-right:-22px;margin-bottom:-22px;background-size:44px 44px;}",P.a.className," svg > g > g{fill:",Object(b.f)("white"),";}"),M=Object(b.c)("div",{target:"e1ggaaxy1"})("mask-image:url(",T,");"),D=Object(b.c)("div",{target:"e1ggaaxy2"})(),F=Object(b.c)("div",{target:"e1ggaaxy3"})("position:relative;",P.a.className,"{right:8px;top:18px;}",N.a.className,"{padding:20px;padding-bottom:16px;font-weight:400;}.timeline-intercom-video-step-mask{mask-image:url('../images/video-tours-mask.svg');}",_.d.className,"{position:relative;}&:hover{",I.b.className,"{transform:translateY(28px);opacity:0;}",B.className,"{opacity:1;&.intercom-tour-step-video-overlay-hidden{opacity:0;}",v.className,"{transform:translateY(0);opacity:1;}}}",({videoComplete:e})=>e&&Object(b.b)(I.b.className,"{transform:translateY(28px);opacity:0;}",B.className,"{opacity:1;&.intercom-tour-step-video-overlay-hidden{opacity:0;}",v.className,"{transform:translateY(0);opacity:1;}}")," ",({placement:e})=>"right"===e&&Object(b.b)(M.className,"{mask-image:url(",R,");transform:rotate(180deg);}",D.className,"{transform:rotate(180deg);}",v.className,"{left:10px;}",P.a.className,"{right:8px;top:8px;}",I.b.className,"{left:10px;margin-right:10px;}")," ",({placement:e})=>"left"===e&&Object(b.b)(M.className,"{mask-image:url(",R,");}",v.className,"{right:10px;}",P.a.className,"{right:18px;top:8px;}",I.b.className,"{left:-10px;margin-left:10px;}")," ",({placement:e})=>"top"===e&&Object(b.b)(D.className,"{transform:rotate(180deg);}",v.className,"{bottom:10px;}",M.className,"{transform:rotate(180deg);}",P.a.className,"{right:8px;top:8px;}",I.b.className,"{bottom:0px;padding-bottom:10px;}"));function H({muted:e,onClick:t}){return a.a.createElement(_.b,{muted:e,onClick:t})}var A=o(0);const V=Object(A.createSelector)(r.o,r.n,(e,t)=>({muted:e,userHasInteractedWithVideo:t}));var W=Object(i.connect)(V,{changeVideoMuted:n.a})((function({block:{url:e,captions:t,thumbnailUrl:o},placement:i,activeStepIndex:r,stepCount:n,onClose:c,onContinue:p,muted:h,changeVideoMuted:m,userHasInteractedWithVideo:g,hasClickedOverlay:b,resetOverlayClick:f,selector:v,progressionBehavior:y}){const[O,C]=Object(s.useState)(!0),[x,w]=Object(s.useState)(),[j,S]=Object(s.useState)(!1),k=()=>{h&&w(0),m(!h)},T=l()("intercom-tour-step-video-overlay",{"intercom-tour-step-video-overlay-hidden":j});return a.a.createElement(F,{placement:i,videoComplete:!O},a.a.createElement(M,null,a.a.createElement(D,null,a.a.createElement(E.a,{srcUrl:e,captions:h?t:void 0,showControls:!1,onComplete:()=>{C(!1)},onReplay:()=>C(!0),muted:h,startTime:x,loop:!g&&h,thumbnailUrl:o}),a.a.createElement(B,{className:T,onClick:e=>{e.target.classList.contains("intercom-tour-step-video-overlay")&&k(),S(!0)},onMouseMove:()=>S(!1)},a.a.createElement(P.a,{onClick:c,"aria-label":Object(d.e)("close")},a.a.createElement(u.a,null)),O&&a.a.createElement(H,{muted:h,onClick:k}),n>1?a.a.createElement(tour_step_footer_TourStepFooter,{activeStepIndex:r,stepCount:n,onContinue:p,selector:v,hasClickedOverlay:b,resetOverlayClick:f,progressionBehavior:y,isVideoStep:!0}):null))))}));function q(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class tour_step_TourStep extends s.Component{constructor(...e){super(...e),q(this,"node",void 0),q(this,"state",{isScrolled:!1}),q(this,"handleScroll",e=>{this.setState({isScrolled:e.target.scrollTop>0})}),q(this,"handleTab",e=>{e.shiftKey||9!==e.keyCode||(e.preventDefault(),this.props.appWindow.document.querySelector(this.props.selector).focus())}),q(this,"handleOnCloseClick",()=>{this.props.onStop()})}getClassNames(){return l()({"intercom-tour-step":!0,"intercom-tour-step-pointer":this.isPointer(),"intercom-tour-step-post":!this.isPointer()})}calculateWidth(){const{appWindow:e}=this.props,t=e.innerWidth;return Math.min(624,t)-80}isPointer(){return!!this.props.selector}getStyles(){if(!this.isPointer())return{width:`${this.calculateWidth()}px`}}onLoad(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){this.props.step.id!==e.step.id&&this.onLoad()}componentDidMount(){if(this.props.onLoad(),this.node){if(this.node.focus(),!this.node||!this.node.addEventListener)return;"click"===this.props.step.progressionBehavior&&this.node.addEventListener("keydown",this.handleTab)}}componentWillUnmount(){this.node&&this.node.removeEventListener("keydown",this.handleTab)}renderVideoTourStep(){const{onContinue:e,activeStepIndex:t,stepCount:o,placement:i,selector:r,step:{blocks:n,progressionBehavior:s},hasClickedOverlay:c,resetOverlayClick:l}=this.props;return i?a.a.createElement("div",{role:"figure","aria-label":n[0]&&n[0].captions?n[0].captions:"",tabIndex:"0",ref:e=>this.node=e},a.a.createElement(W,{block:n[0],placement:i,activeStepIndex:t,stepCount:o,selector:r,onClose:this.handleOnCloseClick,onContinue:e,hasClickedOverlay:c,resetOverlayClick:l,progressionBehavior:s})):null}renderTourStep(){const{onContinue:e,activeStepIndex:t,stepCount:o,author:i,appName:r,selector:n,step:{blocks:s,progressionBehavior:c,id:l},hasClickedOverlay:g,resetOverlayClick:b}=this.props;return a.a.createElement(m.a,{appName:r,isReplyStyle:!1,author:i},a.a.createElement("div",{className:"intercom-tour-step-header"},a.a.createElement(P.a,{onClick:this.handleOnCloseClick,"aria-label":Object(d.e)("close")},a.a.createElement(u.a,null))),a.a.createElement(P.b,{className:"intercom-tour-step-content",tabIndex:"0",ref:e=>this.node=e},a.a.createElement(h.a,{onScroll:this.handleScroll},a.a.createElement(p.a,{blocks:s,key:`tour-step-block-${l}`}))),o>1?a.a.createElement(tour_step_footer_TourStepFooter,{activeStepIndex:t,stepCount:o,onContinue:e,selector:n,progressionBehavior:c,hasClickedOverlay:g,resetOverlayClick:b,isVideoStep:!1}):null)}render(){const{blocks:e}=this.props.step,t=this.state.isScrolled,o=this.isPointer();return a.a.createElement(P.c,{className:this.getClassNames(),style:this.getStyles(),isPointer:o,isPost:!o,scrolled:t},Object(k.b)(e)?this.renderVideoTourStep():this.renderTourStep())}}var z=o(456),L=o(676),U=o(452);const $=Object(b.c)("div",{target:"ekepq2u0"})("position:absolute;z-index:",Object(U.m)(),";");function G({onClick:e,appWindow:t,targetNode:o}){const{left:i,right:r,top:n,bottom:s}=function(e,t){let{left:o,right:i,top:r,bottom:n}=e.getBoundingClientRect();const{pageXOffset:s,pageYOffset:a}=t;return o+=s,i+=s,r+=a,n+=a,{left:o,right:i,top:r,bottom:n}}(o,t),c=function(e){const{body:t,documentElement:o}=e;return t&&o?Math.max(t.offsetHeight,o.clientHeight,o.offsetHeight):0}(t.document);return a.a.createElement(a.a.Fragment,null,a.a.createElement($,{style:{top:0,left:0,right:0,height:n},tabIndex:"none",onClick:e}),a.a.createElement($,{style:{top:n,left:0,width:i,height:s-n},tabIndex:"none",onClick:e}),a.a.createElement($,{style:{top:n,left:r,right:0,height:s-n},tabIndex:"none",onClick:e}),a.a.createElement($,{style:{top:s,left:0,right:0,bottom:0,height:c-s},tabIndex:"none",onClick:e}))}var Y=o(459),X={name:"1j1kj5x",styles:"border:none;box-shadow:none;"};const K=Object(b.c)(Y.a,{target:"e1s9bqu40"})("z-index:",Object(U.m)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);",({isVideo:e})=>e&&X);var J=o(1),Q=o(3),Z=o(858),ee=o(512);function te(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function oe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?te(o,!0).forEach((function(t){ie(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):te(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function ie(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var re=oe({},ee.computeStyles,{fn:({state:e})=>{const{modifiersData:t,options:o}=e,{x:i,y:r}=t.popperOffsets,{arrow:n}=t;e.styles.popper={position:o.strategy,top:"0",left:"0",transform:`translate(${i}px, ${r}px)`};const s=e.placement.split("-")[0],a="x"===(["top","bottom"].indexOf(s)>=0?"x":"y")?{left:0}:{top:0};e.styles.arrow=oe({},{position:o.strategy,transform:`translate3d(${n.x||0}px, ${n.y||0}px, 0)`},{},a),e.attributes.popper=oe({},e.attributes.popper,{},{"data-popper-placement":e.placement})}});const ne=e=>e.split("-")[0],se=(e,t,o)=>Math.max(e,Math.min(t,o));function ae(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function ce(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const le="top",pe="right",he="bottom",de="left";var me=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ae(o,!0).forEach((function(t){ce(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ae(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},ee.arrow,{fn:({state:e,name:t})=>{const o=ne(e.placement),i=[le,he].indexOf(o)>=0?"x":"y",r=e.elements.arrow,{popperOffsets:n}=e.modifiersData;if(!r||!n)return;const s=[de,pe].indexOf(o)>=0,a=e.modifiersData[t+"#persistent"].padding,c=s?"height":"width",l={x:r.offsetLeft,y:r.offsetTop,width:r.offsetWidth,height:r.offsetHeight},p="y"===i?le:de,h="y"===i?he:pe,d=e.rects.reference[c]+e.rects.reference[i]-n[i]-e.rects.popper[c],m=n[i]-e.rects.reference[i],u=e.elements.popper,g=u?"y"===i?u.clientHeight||0:u.clientWidth||0:0,b=d/2-m/2,f=a[p],v=g-l[c]-a[h],y=g/2-l[c]/2+b,O=Math.max(f,Math.min(y,v));e.modifiersData[t]={[i]:O,centerOffset:O-y}}});function ue(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function ge(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const be=["top","bottom","left","right"];var fe=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ue(o,!0).forEach((function(t){ge(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ue(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},ee.flip,{fn:({state:e,name:t})=>{if(e.modifiersData[t].skip)return;const{popperOffsets:o}=e.modifiersData,i=e.rects.popper,{clippingRect:r}=e.elements.reference;let n="bottom";if("auto"===e.options.placement){const e=((e,t,o)=>({top:e.y,bottom:o.height-(t.height+e.y),left:e.x,right:o.width-(t.width+e.x)}))(o,i,r);n=be.sort((t,o)=>e[o]-e[t])[0]}e.placement!==n&&(e.modifiersData[t].skip=!0,e.placement=n,e.reset=!0)}});function ve(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function ye(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Oe=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ve(o,!0).forEach((function(t){ye(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ve(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},ee.preventOverflow,{fn:({state:e,options:t,name:o})=>{const i=t.mainAxis,r=void 0===i||i,n=t.altAxis,s=void 0!==n&&n,a=t.padding,c=t.tether,l=void 0===c||c,p=t.tetherOffset,h=void 0===p?0:p,{clippingRect:d}=e.elements.reference,m=ne(e.placement),u=e.placement.split("-")[1];const g=!u,b=(e=>["top","bottom"].indexOf(e)>=0?"x":"y")(m),f="x"===b?"y":"x";const v=e.modifiersData.popperOffsets,y=e.rects.reference,O=e.rects.popper,C=((e,t,o,i,r)=>({top:0-t.y+r,bottom:t.y-i.height+r,left:0-t.x+r,right:t.x-i.width+r}))(0,v,0,d,a),x="function"==typeof h?h(Object.assign(Object.assign({},e.rects),{},{placement:e.placement})):h,w={x:0,y:0};if(v){if(r){const t="y"===b?"top":"left",o="y"===b?"bottom":"right",i="y"===b?"height":"width",r=v[b],n=v[b]+C[t],s=v[b]-C[o],a=l?-O[i]/2:0,c="start"===u?y[i]:O[i],p="start"===u?-O[i]:-y[i],h=e.elements.arrow,d=l&&h?{x:(j=h).offsetLeft,y:j.offsetTop,width:j.offsetWidth,height:j.offsetHeight}:{width:0,height:0},m=e.modifiersData["arrow#persistent"].padding,f=m[t],S=m[o],k=se(0,y[i],d[i]),E=g?y[i]/2-a-k-f-x:c-k-f-x,P=g?-y[i]/2+a+k+S+x:p+k+S+x,T=e.elements.arrow&&e.elements.arrow.parentNode,R=T?"y"===b?T.clientTop||0:T.clientLeft||0:0,_=e.modifiersData.offset?e.modifiersData.offset[e.placement][b]:0,I=v[b]+E-_-R,N=v[b]+P-_,B=se(l?Math.min(n,I):n,r,l?Math.max(s,N):s);v[b]=B,w[b]=B-r}var j;if(s){const e="x"===b?"top":"left",t="x"===b?"bottom":"right",o=v[f],i=o+C[e],r=o-C[t],n=se(i,o,r);v[f]=n,w[f]=n-o}e.modifiersData[o]=w}}});var Ce=Object(ee.popperGenerator)({defaultModifiers:[ee.popperOffsets,re,ee.applyStyles,ee.offset,Oe,me,fe]}),xe=o(481);const we=Object(b.c)("div",{target:"ev034dr0"})({name:"4t6ioa",styles:"height:25px;width:25px;position:absolute;&[data-popper-placement='top']{bottom:-11px;}&[data-popper-placement='left']{right:-10px;}&[data-popper-placement='right']{left:3px;}&[data-popper-placement='bottom']{top:4px;}"}),je=Object(b.c)("div",{target:"ev034dr1"})({name:"1e120ys",styles:"position:relative;pointer-events:none;height:28px;width:13px;overflow:hidden;&:after{content:'';position:absolute;width:20px;height:40px;background:#ffffff;transform:rotate(45deg);top:2px;}&[data-popper-placement='top']{height:13px;width:28px;transform:rotate(180deg);&:after{left:-3px;top:1px;}}&[data-popper-placement='right']{&:after{left:11px;top:-12px;}}&[data-popper-placement='bottom']{height:13px;width:28px;&:after{top:1px;left:-3px;}}&[data-popper-placement='left']{&:after{right:11px;}}"});var Se=({style:e,children:t,pointerKey:o})=>{const i=`pointer-${o}`,r="\n    position: absolute;\n    z-index: 2147483003;\n    border: none;\n  ".concat((e=>Object.keys(e).map(t=>`${t}: ${e[t]}`).join(";"))(e));return a.a.createElement(xe.a,{name:i,styles:r},t)},ke=o(23);var Ee=e=>({getBoundingClientRect:()=>e.rect,clippingRect:e.clippingRect});var Pe=({selector:e})=>{const[t,o]=Object(s.useState)(null);return Object(s.useEffect)(()=>Object(ke.a)("reference-element-change",{selector:e},({element:e})=>{o(Ee(e))}),[e]),t},Te=o(475);function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function _e(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function Ie(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_e(o,!0).forEach((function(t){Ne(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):_e(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Ne(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Be=({selector:e,children:t,childDimensions:o,pointerKey:i})=>{const[r,n]=Object(s.useState)(null),[c,l]=Object(s.useState)(null),p=Pe({selector:e}),h=Object(s.useContext)(Te.ThemeContext),d=Object(Z.usePopper)(p,r,{createPopper:Ce,placement:"auto",modifiers:[{name:"preventOverflow",options:{padding:10}},{name:"arrow",options:{element:c,padding:25}},{name:"offset",options:{offset:[3,3]}}]}),{styles:m,attributes:u,update:g}=d;Object(s.useEffect)(()=>{g&&g()},[o,g]);const b={height:`${(o.height||0)+30}px`,width:`${(o.width||0)+30}px`,opacity:`${o.opacity||0}`},f={height:`${o.height||0}px`,width:`${o.width||0}px`,padding:"15px"},v=Ie({},m.popper,{},b);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Se,{pointerKey:i,style:v},a.a.createElement("div",Re({ref:n},u.popper,{style:f}),a.a.createElement(we,Re({ref:l},u.popper,{style:Ie({},m.arrow,{opacity:`${o.opacity||0}`})}),a.a.createElement(je,u.popper)),t)),a.a.createElement(xe.a,{name:"pointer-mask",styles:(()=>{if(p){const{top:e,left:t,width:o,height:i}=p.getBoundingClientRect(),r=`\n        top: ${e-3}px;\n        left: ${t-3}px;\n        width: ${o}px;\n        height: ${i}px;\n        padding: 3px;\n        display: "block";\n      `;return(e=>`\n    z-index: 2147483002;\n    position: absolute;\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 0;\n    height: 0;\n    pointer-events: none;\n    border-radius: 1px;\n    box-shadow: 0 0 0 3px ${e.appColor}, 0px 0px 0px 4000px rgba(0, 0, 0, 0.35);\n    border-width: 0;\n  `)(h).concat(r)}return"opacity: 0"})()}))};function Me(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function De(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Me(o,!0).forEach((function(t){Fe(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Me(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Fe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class tour_TourFrame extends s.PureComponent{constructor(...e){super(...e),Fe(this,"state",{width:0,height:0,opacity:0,placement:null,hasClickedOverlay:!1,recordFailureStats:!1}),Fe(this,"handleDimensionFrameSize",({height:e,width:t})=>{this.setState({width:t,height:e,opacity:1})}),Fe(this,"trackingKey",e=>{const{isPreviewingTour:t}=this.props;return t?e+"_preview":e}),Fe(this,"handleOnTourContinue",()=>{const{onContinue:e,activeStepIndex:t,stepCount:o}=this.props;this.setState({opacity:0,recordFailureStats:!1}),e();const i=t+1===o?"done":"next";Object(J.e)("clicked",i,this.trackingKey("tour"),null,this.trackingMetadata())}),Fe(this,"handleOnTourStop",()=>{const{onStop:e}=this.props;Object(J.e)("clicked","stop",this.trackingKey("tour"),null,this.trackingMetadata()),this.setState({opacity:0,recordFailureStats:!1}),e()}),Fe(this,"handleMissingCssSelector",()=>{const{activeStep:e,onFailure:t,isPreviewingTour:o}=this.props;e.selector&&(Object(J.e)("css_selector_match_failed",this.trackingKey("tour_step"),"positioner",null,De({},this.trackingMetadata(),{},this.activeStepSelectorMetadata())),!o&&this.state.recordFailureStats&&t())}),Fe(this,"handleTourStepLoad",()=>{const{stepCount:e,activeStepIndex:t,onComplete:o}=this.props;t+1===e&&o(),this.setState({recordFailureStats:!0}),Object(J.e)("viewed",this.trackingKey("tour_step"),"tour",null,this.trackingMetadata())}),Fe(this,"handleOverlayClick",()=>{Object(J.e)("clicked",this.trackingKey("outside_tour_step"),"tour",null,this.trackingMetadata()),this.setState({hasClickedOverlay:!0})}),Fe(this,"resetOverlayClick",()=>{this.setState({hasClickedOverlay:!1})}),Fe(this,"handleTargetClick",()=>{this.isClickToProgress()&&this.handleOnTourContinue()}),Fe(this,"handlePlacementChange",e=>{this.setState({placement:e})}),Fe(this,"isClickToProgress",()=>"click"===this.props.activeStep.progressionBehavior),Fe(this,"needsInteractionWithElement",()=>{const{progressionBehavior:e}=this.props.activeStep;return"click"===e||"type"===e}),Fe(this,"getOverlayRenderer",()=>{if(this.needsInteractionWithElement())return this.clickToProgressOverlayRenderer}),Fe(this,"clickToProgressOverlayRenderer",(e,{appWindow:t},o)=>o?a.a.createElement(G,{onClick:e,targetNode:o,appWindow:t}):null)}getChildDimensions(){const{width:e,height:t,opacity:o}=this.state;return{width:e,height:t,opacity:o}}getFrameDimensions(){const{width:e,height:t}=this.state;return{width:e,height:t}}trackingMetadata(){const{activeTourId:e,activeStep:t,activeStepIndex:o,stepCount:i}=this.props;return{tour_id:e,tour_step_id:t.id,active_step_index:o,step_count:i}}activeStepSelectorMetadata(){const{activeStep:e}=this.props;let t=!1;if(e.selectors.auto_secondary)try{t=null!=window.parent.document.querySelector(e.selectors.auto_secondary)}catch(e){}return De({},e.selectors,{secondary_currently_matches:t})}renderTourStep(){const{appWindow:e,appName:t,author:o,activeStep:i,stepCount:r,activeStepIndex:n}=this.props,{placement:s}=this.state,c=Object(k.b)(i.blocks);return a.a.createElement(K,{style:this.getFrameDimensions(),frameName:"intercom-tour-frame",className:"intercom-tour-frame",title:`Intercom live chat ${Object(d.e)("tour")}`,isVideo:c},()=>a.a.createElement(z.b,{id:"tour-frame",key:"tour-frame",onChange:this.handleDimensionFrameSize},a.a.createElement(tour_step_TourStep,{appWindow:e,appName:t,author:o,step:i,activeStepIndex:n,stepCount:r,selector:i.selector,onLoad:this.handleTourStepLoad,onContinue:this.handleOnTourContinue,onStop:this.handleOnTourStop,placement:s,hasClickedOverlay:this.state.hasClickedOverlay,resetOverlayClick:this.resetOverlayClick})))}render(){const{appWindow:e,activeStep:t,isAwaitingProgress:o}=this.props,i=Object(k.b)(t.blocks);return Object(Q.a)()?a.a.createElement(Be,{childDimensions:this.getChildDimensions(),selector:t.selector,pointerKey:`tour-step-${t.id}`,key:`tour-step-${t.id}`},this.renderTourStep()):a.a.createElement(L.a,{appWindow:e,scrollable:!0,targetSelector:t.selector,childDimensions:this.getChildDimensions(),renderFallback:!o,key:`tour-step-${t.id}`,onMissingSelector:this.handleMissingCssSelector,onOverlayClick:this.handleOverlayClick,onTargetClick:this.handleTargetClick,onPlacementChange:this.handlePlacementChange,hideArrow:i||!t.selector,renderOverlay:this.getOverlayRenderer(),shouldAnimate:this.isClickToProgress()},this.renderTourStep())}}o.d(t,"mapStateToProps",(function(){return He})),o.d(t,"mapDispatchToProps",(function(){return Ae}));const He=e=>{const t=Object(r.c)(e),o=Object(r.f)(e),i=Object(r.e)(e),n=Object(r.d)(e),s=Object(r.a)(e),a=Object(r.i)(e),c=Object(r.b)(e),l=Object(r.h)(e),p=e.app.name;return{activeTourId:t.id,activeStep:o,activeStepIndex:i,stepCount:n,appName:p,author:s,isPreviewingTour:a,endTourAnimation:c,isAwaitingProgress:l}},Ae=e=>({onContinue:()=>{e(Object(n.e)())},onStop:()=>{e(Object(n.i)())},onComplete:()=>{e(Object(n.c)())},onFailure:()=>{e(Object(n.f)())}});t.default=Object(i.connect)(He,Ae)(tour_TourFrame)},882:function(e,t,o){"use strict";o.r(t);var i=o(451),r=o(453),n=o.n(r),s=o(449),a=o.n(s),c=o(457),l=o(663);class message_container_MessageContainer extends s.Component{componentDidMount(){const{isFetching:e,isFetched:t,onFetch:o}=this.props;e||t||o()}render(){const{props:e}=this;return a.a.createElement(c.TransitionGroup,null,e.isFetched?a.a.createElement(c.CSSTransition,{classNames:"intercom-message",timeout:{enter:200,exit:200}},a.a.createElement(l.a,e)):null)}}message_container_MessageContainer.propTypes={isFetching:n.a.bool.isRequired,isFetched:n.a.bool.isRequired,onFetch:n.a.func.isRequired};var p=o(2),h=o(5),d=o(63),m=o(6);o.d(t,"mapStateToProps",(function(){return u})),o.d(t,"mapDispatchToProps",(function(){return g})),o.d(t,"mergeProps",(function(){return b}));const u=e=>{const t=Object(d.a)(e)[0],{isFetching:o}=t;return{isFetching:o,isFetched:!Object(m.m)(t),conversation:t}},g=e=>({onFetch:t=>{e(Object(h.l)(p.b,t))}}),b=(e,t,o)=>Object.assign({},e,t,o,{onFetch:()=>{t.onFetch(e.conversation.id)}});t.default=Object(i.connect)(u,g,b)(message_container_MessageContainer)},883:function(e,t,o){"use strict";o.r(t);var i=o(449),r=o.n(i),n=o(456),s=o(675),a=o(450),c=o(459),l=o(452),p=o(581);const h=Object(a.c)(c.a,{target:"e1gfsz3r0"})("position:fixed;z-index:",Object(l.m)(),";",({theme:e})=>Object(a.b)("bottom:",Object(l.k)({theme:e})-p.d,"px;right:",e.horizontalPaddingPx-p.i,"px;")," ",({width:e,height:t})=>Object(a.b)("width:",e+10,"px;height:",t+5,"px;")," ",({theme:e})=>e.isLeftAlign&&Object(a.b)("left:",e.horizontalPaddingPx-p.i,"px;right:auto;"));var d=o(33);function m(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"default",(function(){return notifications_NotificationsFrame}));class notifications_NotificationsFrame extends i.Component{constructor(...e){super(...e),m(this,"state",{width:0,height:0}),m(this,"handleMeasurementChange",({width:e,height:t})=>{this.setState({width:e,height:t})})}render(){return r.a.createElement(h,{frameName:"intercom-notifications-frame",title:`Intercom live chat ${Object(d.e)("message")}`,width:this.state.width,height:this.state.height},(e,t)=>r.a.createElement(n.b,{onChange:this.handleMeasurementChange},r.a.createElement(s.a,{frameWindow:e,frameNode:t})))}}},884:function(e,t,o){"use strict";o.r(t);var i=o(449),r=o.n(i),n=o(456),s=o(675),a=o(481);var c=({width:e,height:t})=>`\n  position: fixed;\n  z-index: 2147483003;\n  bottom: 90px;\n  width: ${e+10}px;\n  height: ${t+5}px;\n  right: 15px;\n  border: none;\n`;function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"default",(function(){return notifications_NotificationsFrame}));class notifications_NotificationsFrame extends i.Component{constructor(...e){super(...e),l(this,"state",{width:0,height:0}),l(this,"handleMeasurementChange",({width:e,height:t})=>{this.setState({width:e,height:t})})}render(){const{width:e,height:t}=this.state,o=c({height:t,width:e});return r.a.createElement(a.a,{name:"notifications",styles:o},r.a.createElement(n.b,{onChange:this.handleMeasurementChange},r.a.createElement(s.a,{frameWindow:window,frameNode:window.document.body})))}}},885:function(e,t,o){"use strict";o.r(t);var i=o(451),r=o(671),n=o(663),s=o(9),a=o(8),c=o(2),l=o(10);var p=o(5),h=o(213),d=o(158);o.d(t,"mapStateToProps",(function(){return m}));const m=e=>{const{isPresent:t}=e.user,{name:o,userConversationAttachmentsEnabled:i,userConversationGifsEnabled:r}=e.app,n=Object(d.a)(e),c=n[0],l=a.a.isMobileBrowser(),p=n[0].parts[0],h=Object(s.l)(e),{upfrontEmailCollectorShowing:m}=e.app.upfrontEmailCollection;return{appName:o,conversation:c,part:p,userIsPresent:t,isMobile:l,showUploadButton:i,showGifButton:r,shouldShowUpfrontEmailComposer:h,isUpfrontEmailComposerShowing:m}};t.default=Object(i.connect)(m,e=>({onOpen:(t,o)=>{e(((e,t)=>({type:"OPEN_POINTER_MESSAGE",conversationId:e,partId:t}))(t,o))},onClose:t=>{e({type:"CLOSE_POINTER_MESSAGE"}),e(Object(h.a)(t))},onConversationRead:t=>{e(Object(p.m)(c.b,t))},onComposerOrFormInputClick:t=>{e({type:"CLOSE_POINTER_MESSAGE"}),e(Object(h.a)(t)),e(Object(l.f)(t)),e(Object(p.l)(c.b,t))},onReactionSelect:(t,o)=>{e(Object(p.k)(c.b,t,o,!1))}}),n.b)(r.a)}}]);